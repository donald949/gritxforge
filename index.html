<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grit x Forge Payplan Calculator</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: #2c3e50;
            min-height: 100vh;
            padding: 0;
            line-height: 1.6;
            margin: 0;
        }

        .page-wrapper {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar Styles */
        .sidebar {
            width: 60px;
            background: #2c3e50;
            transition: width 0.3s ease;
            position: fixed;
            left: 0;
            top: 0;
            height: 100vh;
            overflow: hidden;
            z-index: 1000;
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
        }

        .sidebar.expanded {
            width: 250px;
        }

        .sidebar-header {
            padding: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: space-between;
            min-height: 70px;
        }

        .sidebar-logo {
            color: #a10e02;
            font-weight: 700;
            font-size: 1.5em;
            white-space: nowrap;
            opacity: 0;
            transition: all 0.3s ease;
            margin-left: 0;
        }

        .sidebar.expanded .sidebar-logo {
            opacity: 1;
            margin-left: 0;
        }

        /* When sidebar is collapsed, hide logo to avoid hamburger menu interference */
        .sidebar:not(.expanded) .sidebar-logo {
            opacity: 0;
            visibility: hidden;
        }

        .sidebar-toggle {
            background: transparent;
            border: none;
            color: white;
            cursor: pointer;
            padding: 8px;
            border-radius: 6px;
            transition: background 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .sidebar-toggle:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .sidebar-nav {
            padding: 20px 0;
        }

        .nav-item {
            display: flex;
            align-items: center;
            padding: 14px 20px;
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            transition: all 0.3s ease;
            cursor: pointer;
            border-left: 3px solid transparent;
            white-space: nowrap;
        }

        .nav-item:hover {
            background: rgba(255, 255, 255, 0.05);
            color: white;
        }

        .nav-item.active {
            background: rgba(161, 14, 2, 0.1);
            color: #a10e02;
            border-left-color: #a10e02;
        }
        
        .sidebar-footer {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 20px 0;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .logout-btn {
            background: none;
            border: none;
            width: 100%;
            cursor: pointer;
            color: rgba(255, 255, 255, 0.7);
            transition: all 0.3s ease;
        }
        
        .logout-btn:hover {
            background: rgba(161, 14, 2, 0.2);
            color: #ff6b6b;
        }

        .nav-item svg {
            min-width: 20px;
            width: 20px;
            height: 20px;
            margin-right: 15px;
        }

        .nav-item span {
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .sidebar.expanded .nav-item span {
            opacity: 1;
        }

        /* Hamburger menu icon */
        .hamburger {
            width: 20px;
            height: 20px;
            position: relative;
            cursor: pointer;
        }

        .hamburger span {
            display: block;
            position: absolute;
            height: 2px;
            width: 100%;
            background: white;
            border-radius: 1px;
            opacity: 1;
            left: 0;
            transform: rotate(0deg);
            transition: .25s ease-in-out;
        }

        .hamburger span:nth-child(1) {
            top: 3px;
        }

        .hamburger span:nth-child(2) {
            top: 9px;
        }

        .hamburger span:nth-child(3) {
            top: 15px;
        }

        /* Hamburger animation when expanded */
        .sidebar.expanded .hamburger span:nth-child(1) {
            top: 9px;
            transform: rotate(135deg);
        }

        .sidebar.expanded .hamburger span:nth-child(2) {
            opacity: 0;
            left: -20px;
        }

        .sidebar.expanded .hamburger span:nth-child(3) {
            top: 9px;
            transform: rotate(-135deg);
        }

        /* Hamburger Menu Button (Desktop & Mobile) */
        .mobile-hamburger {
            display: flex;
            position: fixed;
            top: 15px;
            left: 15px;
            z-index: 1001;
            background: #2c3e50;
            border: none;
            padding: 10px;
            border-radius: 6px;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            width: 40px;
            height: 40px;
            justify-content: center;
            align-items: center;
            transition: all 0.3s ease;
        }

        /* Position adjusts based on sidebar state via JavaScript */

        .mobile-hamburger .hamburger {
            width: 18px;
            height: 18px;
            position: relative;
        }

        .container {
            flex: 1;
            margin-left: 60px;
            padding: 40px;
            background: #ffffff;
            min-height: 100vh;
            transition: margin-left 0.3s ease;
        }

        .sidebar.expanded ~ .container {
            margin-left: 250px;
        }

        h1 {
            text-align: center;
            margin-bottom: 15px;
            font-size: 2.8em;
            font-weight: 700;
            color: #2c3e50;
            letter-spacing: -1px;
        }
        
        h1 .brand-highlight {
            color: #a10e02;
            position: relative;
        }
        
        .title-accent {
            width: 80px;
            height: 3px;
            background: linear-gradient(90deg, #a10e02 0%, #7a0a01 100%);
            margin: 10px auto 20px auto;
            border-radius: 2px;
        }
        
        .subtitle-quote {
            text-align: center;
            font-size: 0.9em;
            color: #6c757d;
            opacity: 0.7;
            font-style: italic;
            margin-bottom: 40px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            line-height: 1.4;
        }

        .tabs {
            display: none;
        }

        .tab {
            display: none;
        }

        /* Mobile swipe instruction */
        .mobile-swipe-hint {
            display: none;
        }

        .tab-content {
            display: none;
            background: #ffffff;
            border-radius: 16px;
            padding: 32px;
            border: 1px solid #e8ecef;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.05);
        }

        .tab-content.active {
            display: block;
        }

        h2 {
            color: #2c3e50;
            font-size: 1.8em;
            font-weight: 600;
            margin-bottom: 24px;
            padding-bottom: 12px;
            border-bottom: 3px solid #a10e02;
        }

        .form-group {
            margin-bottom: 24px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            font-size: 15px;
            color: #495057;
        }

        input, select {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid #e8ecef;
            border-radius: 10px;
            font-size: 15px;
            background: #ffffff;
            color: #495057;
            transition: all 0.3s ease;
        }

        input:focus, select:focus {
            outline: none;
            border-color: #a10e02;
            box-shadow: 0 0 0 3px rgba(161, 14, 2, 0.1);
            transform: translateY(-1px);
        }

        input:hover, select:hover {
            border-color: #6c757d;
        }

        .calculate-btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #a10e02 0%, #7a0a01 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 32px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .calculate-btn:hover {
            background: linear-gradient(135deg, #7a0a01 0%, #5a0701 100%);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(161, 14, 2, 0.3);
        }

        .calculate-btn:active {
            transform: translateY(0);
        }

        .export-btn {
            display: inline-flex;
            align-items: center;
            padding: 12px 20px;
            background: linear-gradient(135deg, #a10e02 0%, #7a0a01 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 16px;
            text-decoration: none;
        }

        .export-btn:hover {
            background: linear-gradient(135deg, #7a0a01 0%, #5a0701 100%);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(161, 14, 2, 0.3);
        }

        .export-btn svg {
            margin-right: 8px;
        }

        .result {
            margin-top: 40px;
            padding: 32px;
            background: linear-gradient(135deg, #f5c6c4 0%, #f0b3b0 100%);
            border: 2px solid #a10e02;
            border-radius: 16px;
            display: none;
            box-shadow: 0 8px 32px rgba(161, 14, 2, 0.1);
        }

        .result.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            padding: 12px 0;
            border-bottom: 1px solid rgba(161, 14, 2, 0.2);
            gap: 10px;
        }

        .result-item:last-child {
            border-bottom: none;
            font-weight: 700;
            font-size: 1.32em;
            color: #000000;
            background: rgba(255, 255, 255, 0.7);
            margin: 16px -16px -16px -16px;
            padding: 20px 16px;
            border-radius: 0 0 12px 12px;
        }

        .result-item span:first-child {
            color: #000000;
            font-weight: 600;
            flex: 1;
            line-height: 1.3;
            font-size: 0.9em;
        }

        .result-item span:last-child {
            color: inherit;
            font-weight: 700;
            font-size: 0.99em;
            text-align: right;
            flex-shrink: 0;
            max-width: 40%;
            word-break: break-word;
        }
        
        /* Mobile specific improvements */
        @media (max-width: 768px) {
            .result-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 4px;
                padding: 8px 0;
            }
            
            .result-item span:first-child {
                font-size: 0.935em;
                max-width: 100%;
            }
            
            .result-item span:last-child {
                font-size: 0.99em;
                max-width: 100%;
                text-align: left;
                word-break: normal;
            }
            
            .result-item:last-child {
                font-size: 1.21em;
                padding: 16px;
            }
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-top: 12px;
            padding: 16px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 1px solid #e8ecef;
        }

        .checkbox-group input[type="checkbox"] {
            width: 18px;
            height: 18px;
            margin: 0;
            cursor: pointer;
        }

        .checkbox-group label {
            margin-bottom: 0;
            cursor: pointer;
            font-size: 14px;
        }

        h3 {
            color: #a10e02;
            font-size: 1.4em;
            font-weight: 600;
            margin: 32px 0 20px 0;
            padding-bottom: 8px;
            border-bottom: 2px solid #a10e02;
        }

        h4 {
            color: #a10e02;
            font-size: 1.2em;
            font-weight: 600;
            margin: 24px 0 16px 0;
            padding-bottom: 6px;
            border-bottom: 1px solid #a10e02;
        }

        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
        }

        small {
            color: #dc3545 !important;
            font-weight: 500;
            display: block;
            margin-top: 4px;
        }

        /* Professional styling for notes */
        div[style*="background: rgba(255, 221, 0, 0.1)"] {
            background: #fff3cd !important;
            border: 1px solid #ffeaa7 !important;
            border-radius: 12px !important;
            padding: 20px !important;
        }

        div[style*="background: rgba(255, 221, 0, 0.1)"] p {
            color: #856404 !important;
            margin: 0 !important;
            font-weight: 500;
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            .container {
                margin: 0;
                padding: 20px;
                border-radius: 16px;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            }

            .tabs {
                margin-bottom: 24px;
                border-radius: 12px;
            }

            .tab {
                min-width: 140px;
                padding: 14px 16px;
                font-size: 13px;
                font-weight: 600;
            }

            .two-column {
                grid-template-columns: 1fr;
                gap: 16px;
            }

            h1 {
                font-size: 2.2em;
                margin-bottom: 24px;
            }

            h2 {
                font-size: 1.5em;
                margin-bottom: 20px;
            }

            .tab-content {
                padding: 20px;
            }

            .form-group {
                margin-bottom: 20px;
            }

            input, select {
                padding: 16px;
                font-size: 16px;
                border-radius: 8px;
            }

            .calculate-btn {
                padding: 16px;
                font-size: 15px;
                margin-top: 24px;
            }

            .result {
                margin-top: 24px;
                padding: 20px;
            }

            .result-item {
                padding: 12px 0;
                font-size: 14px;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 16px;
                padding-top: 80px;
            }

            h1 {
                font-size: 1.8em;
            }

            .tab-content {
                padding: 16px;
            }

            input, select {
                padding: 14px;
                font-size: 16px;
            }
        }

        /* Mobile Sidebar Styles */
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                width: 250px;
            }

            .sidebar.expanded {
                transform: translateX(0);
            }

            .container {
                margin-left: 0;
                padding-top: 80px;
            }

            .sidebar.expanded ~ .container {
                margin-left: 0;
            }

            .mobile-hamburger {
                display: flex;
            }

            /* Overlay when sidebar is open on mobile */
            .sidebar-overlay {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.5);
                z-index: 999;
            }

            .sidebar-overlay.active {
                display: block;
            }
        }

        /* User Info Bar Styles */
        .user-info-bar {
            background: #ffffff;
            border-bottom: 2px solid #e8ecef;
            padding: 12px 20px;
            margin: -40px -40px 20px -40px;
            border-radius: 20px 20px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }

        .user-info-left {
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .user-email {
            color: #495057;
            font-size: 0.9em;
            font-weight: 500;
        }

        .user-email strong {
            color: #a10e02;
            font-weight: 600;
        }

        .user-role-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
        }

        .role-admin {
            background: #d1ecf1;
            color: #0c5460;
        }

        .role-manager {
            background: #d4edda;
            color: #155724;
        }

        .role-rookie {
            background: #fff3cd;
            color: #856404;
        }

        .role-veteran {
            background: #cfe2ff;
            color: #084298;
        }

        .user-info-right {
            display: flex;
            gap: 8px;
        }

        .btn-small {
            padding: 8px 16px;
            background: #6c757d;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 0.85em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .btn-small:hover {
            background: #5a6268;
            transform: translateY(-1px);
        }

        .btn-admin {
            background: linear-gradient(135deg, #a10e02 0%, #7a0a01 100%);
        }

        .btn-admin:hover {
            background: linear-gradient(135deg, #7a0a01 0%, #5a0701 100%);
        }

        .btn-crm {
            background: linear-gradient(135deg, #28a745 0%, #20a038 100%);
            margin-right: 10px;
        }

        .btn-crm:hover {
            background: linear-gradient(135deg, #20a038 0%, #1e7b34 100%);
        }

        @media (max-width: 768px) {
            .user-info-bar {
                margin: -20px -20px 20px -20px;
                padding: 12px 15px;
            }

            .user-info-left, .user-info-right {
                width: 100%;
            }

            .user-info-right {
                justify-content: flex-start;
            }

            .btn-small {
                flex: 1;
            }
        }

        @media (max-width: 480px) {
            .user-info-bar {
                margin: -16px -16px 20px -16px;
            }
        }
    </style>
</head>
<body>
    <!-- Hamburger Menu for Mobile -->
    <button class="mobile-hamburger" onclick="toggleSidebar()">
        <div class="hamburger" id="mobile-hamburger-icon">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </button>

    <!-- Sidebar Overlay for Mobile -->
    <div class="sidebar-overlay" onclick="toggleSidebar()"></div>

    <!-- Sidebar Navigation -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <button class="sidebar-toggle" onclick="toggleSidebar()">
                <div class="hamburger">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </button>
        </div>
        <nav class="sidebar-nav">
            <div id="nav-commission" class="nav-item active" onclick="openTab('commission')">
                <svg fill="currentColor" viewBox="0 0 16 16">
                    <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10z"/>
                </svg>
                <span>Personal</span>
            </div>
            <div id="nav-recruiter" class="nav-item" onclick="openTab('recruiter')">
                <svg fill="currentColor" viewBox="0 0 16 16">
                    <path d="M15 14s1 0 1-1-1-4-5-4-5 3-5 4 1 1 1 1h8zm-7.978-1A.261.261 0 0 1 7 12.996c.001-.264.167-1.03.76-1.72C8.312 10.629 9.282 10 11 10c1.717 0 2.687.63 3.24 1.276.593.69.758 1.457.76 1.72l-.008.002a.274.274 0 0 1-.014.002H7.022zM11 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm3-2a3 3 0 1 1-6 0 3 3 0 0 1 6 0zM6.936 9.28a5.88 5.88 0 0 0-1.23-.247A7.35 7.35 0 0 0 5 9c-4 0-5 3-5 4 0 .667.333 1 1 1h4.216A2.238 2.238 0 0 1 5 13c0-1.01.377-2.042 1.09-2.904.243-.294.526-.569.846-.816zM4.92 10A5.493 5.493 0 0 0 4 13H1c0-.26.164-1.03.76-1.724.545-.636 1.492-1.256 3.16-1.275zM1.5 5.5a3 3 0 1 1 6 0 3 3 0 0 1-6 0zm3-2a2 2 0 1 0 0 4 2 2 0 0 0 0-4z"/>
                </svg>
                <span>Recruiter</span>
            </div>
            <div id="nav-management" class="nav-item" onclick="openTab('management')">
                <svg fill="currentColor" viewBox="0 0 16 16">
                    <path d="M7 14s-1 0-1-1 1-4 5-4 5 3 5 4-1 1-1 1H7zm4-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
                    <path fill-rule="evenodd" d="M5.216 14A2.238 2.238 0 0 1 5 13c0-1.355.68-2.75 1.936-3.72A6.325 6.325 0 0 0 5 9c-4 0-5 3-5 4s1 1 1 1h4.216z"/>
                    <path d="M4.5 8a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5z"/>
                </svg>
                <span>Management</span>
            </div>
            <div id="nav-profit-share" class="nav-item" onclick="openTab('profit-share')">
                <svg fill="currentColor" viewBox="0 0 16 16">
                    <path d="M4 10.781c.148 1.667 1.513 2.85 3.591 3.003V15h1.043v-1.216c2.27-.179 3.678-1.438 3.678-3.3 0-1.59-.947-2.51-2.956-3.028l-.722-.187V3.467c1.122.11 1.879.714 2.07 1.616h1.47c-.166-1.6-1.54-2.748-3.54-2.875V1H7.591v1.233c-1.939.23-3.27 1.472-3.27 3.156 0 1.454.966 2.483 2.661 2.917l.61.162v4.031c-1.149-.17-1.94-.8-2.131-1.718H4zm3.391-3.836c-1.043-.263-1.6-.825-1.6-1.616 0-.944.704-1.641 1.8-1.828v3.495l-.2-.05zm1.591 1.872c1.287.323 1.852.859 1.852 1.769 0 1.097-.826 1.828-2.2 1.939V8.73l.348.086z"/>
                </svg>
                <span>Profit Share</span>
            </div>
            <div id="nav-step-bonus" class="nav-item" onclick="openTab('step-bonus')">
                <svg fill="currentColor" viewBox="0 0 16 16">
                    <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
                </svg>
                <span>Step Bonus</span>
            </div>
            <div id="nav-summary" class="nav-item" onclick="openTab('summary')">
                <svg fill="currentColor" viewBox="0 0 16 16">
                    <path d="M14 14V4.5L9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2zM9.5 3A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5v2z"/>
                    <path d="M4.603 14.087a.81.81 0 0 1-.438-.42c-.195-.388-.13-.776.08-1.102.198-.307.526-.568.897-.787a7.68 7.68 0 0 1 1.482-.645 19.697 19.697 0 0 0 1.062-2.227 7.269 7.269 0 0 1-.43-1.295c-.086-.4-.119-.796-.046-1.136.075-.354.274-.672.65-.823.192-.077.4-.12.602-.077a.7.7 0 0 1 .477.365c.088.164.12.356.127.538.007.188-.012.396-.047.614-.084.51-.27 1.134-.52 1.794a10.954 10.954 0 0 0 .98 1.686 5.753 5.753 0 0 1 1.334.05c.364.066.734.195.96.465.12.144.193.32.2.518.007.192-.047.382-.138.563a1.04 1.04 0 0 1-.354.416.856.856 0 0 1-.51.138c-.331-.014-.654-.196-.933-.417a5.712 5.712 0 0 1-.911-.95 11.651 11.651 0 0 0-1.997.406 11.307 11.307 0 0 1-1.02 1.51c-.292.35-.609.656-.927.787a.793.793 0 0 1-.58.029zm1.379-1.901c-.166.076-.32.156-.459.238-.328.194-.541.383-.647.547-.094.145-.096.25-.04.361.01.022.02.036.026.044a.266.266 0 0 0 .035-.012c.137-.056.355-.235.635-.572a8.18 8.18 0 0 0 .45-.606zm1.64-1.33a12.71 12.71 0 0 1 1.01-.193 11.744 11.744 0 0 1-.51-.858 20.801 20.801 0 0 1-.5 1.05zm2.446.45c.15.163.296.3.435.41.24.19.407.253.498.256a.107.107 0 0 0 .07-.015.307.307 0 0 0 .094-.125.436.436 0 0 0 .059-.2.095.095 0 0 0-.026-.063c-.052-.062-.2-.152-.518-.209a3.876 3.876 0 0 0-.612-.053zM8.078 7.8a6.7 6.7 0 0 0 .2-.828c.031-.188.043-.343.038-.465a.613.613 0 0 0-.032-.198.517.517 0 0 0-.145.04c-.087.035-.158.106-.196.283-.04.192-.03.469.046.822.024.111.054.227.09.346z"/>
                </svg>
                <span>Summary</span>
            </div>
            <!-- Separator for page navigation -->
            <div style="height: 1px; background: rgba(255,255,255,0.1); margin: 20px 0;"></div>
            
            <!-- Page Navigation -->
            <a href="crm.html" class="nav-item" id="nav-crm" style="display: none;">
                <svg fill="currentColor" viewBox="0 0 16 16">
                    <path d="M12 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zM5 4h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1zm-.5 2.5A.5.5 0 0 1 5 6h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1-.5-.5zM5 8h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1zm0 2h3a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1z"/>
                </svg>
                <span>CRM Dashboard</span>
            </a>
            
            <a href="admin.html" class="nav-item" id="nav-admin" style="display: none;">
                <svg fill="currentColor" viewBox="0 0 16 16">
                    <path d="M9.405 1.05c-.413-1.4-2.397-1.4-2.81 0l-.1.34a1.464 1.464 0 0 1-2.105.872l-.31-.17c-1.283-.698-2.686.705-1.987 1.987l.169.311c.446.82.023 1.841-.872 2.105l-.34.1c-1.4.413-1.4 2.397 0 2.81l.34.1a1.464 1.464 0 0 1 .872 2.105l-.17.31c-.698 1.283.705 2.686 1.987 1.987l.311-.169a1.464 1.464 0 0 1 2.105.872l.1.34c.413 1.4 2.397 1.4 2.81 0l.1-.34a1.464 1.464 0 0 1 2.105-.872l.31.17c1.283.698 2.686-.705 1.987-1.987l-.169-.311a1.464 1.464 0 0 1 .872-2.105l.34-.1c1.4-.413 1.4-2.397 0-2.81l-.34-.1a1.464 1.464 0 0 1-.872-2.105l.17-.31c.698-1.283-.705-2.686-1.987-1.987l-.311.169a1.464 1.464 0 0 1-2.105-.872l-.1-.34zM8 10.93a2.929 2.929 0 1 1 0-5.86 2.929 2.929 0 0 1 0 5.858z"/>
                </svg>
                <span>Admin Portal</span>
            </a>
        </nav>
        <!-- Logout button at bottom of sidebar -->
        <div class="sidebar-footer">
            <button onclick="logout()" class="nav-item logout-btn">
                <svg fill="currentColor" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0v2z"/>
                    <path fill-rule="evenodd" d="M15.854 8.354a.5.5 0 0 0 0-.708L12.707 4.5a.5.5 0 1 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.294 2.146a.5.5 0 0 0 .708.708l3.147-2.856z"/>
                </svg>
                <span>Logout</span>
            </button>
        </div>
    </div>

    <div class="container">
        <!-- User Info Bar -->
        <div class="user-info-bar">
            <div class="user-info-left">
                <div class="user-email">
                    Logged in as: <strong id="logged-in-email"></strong>
                </div>
                <span id="logged-in-role" class="user-role-badge"></span>
            </div>
            <div class="user-info-right">
                <a href="crm.html" id="crm-link" class="btn-small btn-crm" style="display: none;">CRM Dashboard</a>
                <a href="admin.html" id="admin-link" class="btn-small btn-admin" style="display: none;">Admin Portal</a>
            </div>
        </div>

        <div style="text-align: center; margin-bottom: 10px;">
            <img src="grit x forge logo.png" alt="GRIT x FORGE" style="max-width: 300px; width: 100%; height: auto;">
        </div>

        <!-- Commission Calculator Tab -->
        <div id="commission" class="tab-content active">
            <p class="subtitle-quote">"Great things are done by a series of small things brought together." – Vincent van Gogh</p>
            <h2>Commission Calculator</h2>
            
            <!-- Basic Setup Card -->
            <div class="calculator-card" style="margin-bottom: 30px; padding: 25px; background: #ffffff; border-radius: 12px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1); color: #2c3e50; border: 2px solid #a10e02;">
                <div style="display: flex; align-items: center; margin-bottom: 20px;">
                    <div style="background: #a10e02; border-radius: 50%; padding: 12px; margin-right: 15px;">
                        <svg width="24" height="24" fill="white" viewBox="0 0 16 16">
                            <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10z"/>
                        </svg>
                    </div>
                    <div>
                        <h3 style="margin: 0; font-size: 1.2em; font-weight: 600; color: #a10e02;">Basic Setup</h3>
                        <p style="margin: 5px 0 0 0; opacity: 0.7; font-size: 0.9em; color: #6c757d;">Select your experience level and payscale</p>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="payscale" style="color: #2c3e50;">Select Payscale:</label>
                    <select id="payscale" onchange="toggleHousingOptions()">
                        <option value="rookie">Rookie</option>
                        <option value="veteran">Veteran/Experienced</option>
                        <option value="return-rep">Return Rep</option>
                    </select>
                </div>

                <!-- Starting Commission for Return Reps -->
                <div class="form-group" id="starting-commission-group" style="display: none;">
                    <label for="starting-commission" style="color: #2c3e50;">Starting Commission Percentage (%):</label>
                    <input type="number" id="starting-commission" placeholder="Enter your starting commission %" min="0" max="100" step="0.1">
                    <small style="color: #6c757d; font-size: 12px; font-style: italic;">Your commission will never drop below this percentage</small>
                </div>
            </div>
            
            <!-- Revenue Calculation Card -->
            <div class="calculator-card" style="margin-bottom: 30px; padding: 25px; background: #ffffff; border-radius: 12px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1); color: #2c3e50; border: 2px solid #a10e02;">
                <div style="display: flex; align-items: center; margin-bottom: 20px;">
                    <div style="background: #a10e02; border-radius: 50%; padding: 12px; margin-right: 15px;">
                        <svg width="24" height="24" fill="white" viewBox="0 0 16 16">
                            <path d="M1.5 1a.5.5 0 0 0-.5.5v4a.5.5 0 0 1-1 0v-4A1.5 1.5 0 0 1 1.5 0h4a.5.5 0 0 1 0 1h-4zM11 .5a.5.5 0 0 1 .5-.5h4A1.5 1.5 0 0 1 17 1.5v4a.5.5 0 0 1-1 0v-4a.5.5 0 0 0-.5-.5h-4a.5.5 0 0 1-.5-.5zM.5 11a.5.5 0 0 1 .5.5v4a.5.5 0 0 0 .5.5h4a.5.5 0 0 1 0 1h-4A1.5 1.5 0 0 1 0 15.5v-4a.5.5 0 0 1 .5-.5zm15 0a.5.5 0 0 1 .5.5v4a1.5 1.5 0 0 1-1.5 1.5h-4a.5.5 0 0 1 0-1h4a.5.5 0 0 0 .5-.5v-4a.5.5 0 0 1 .5-.5zM3 4.5a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7zm2 0a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7zm2 0a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7zm2 0a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zm3 0a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7z"/>
                        </svg>
                    </div>
                    <div>
                        <h3 style="margin: 0; font-size: 1.2em; font-weight: 600; color: #a10e02;">Revenue Calculation</h3>
                        <p style="margin: 5px 0 0 0; opacity: 0.7; font-size: 0.9em; color: #6c757d;">Calculate your total serviced revenue and cancellations</p>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="accounts-sold" style="color: #2c3e50;">Number of Accounts Sold:</label>
                    <input type="number" id="accounts-sold" placeholder="Enter number of accounts" min="0" onchange="calculateRevenue()" oninput="calculateRevenue()">
                </div>
                
                <div class="form-group">
                    <label for="avg-contract" style="color: #2c3e50;">Average Contract Value ($):</label>
                    <input type="number" id="avg-contract" placeholder="Enter average contract value" min="0" step="0.01" onchange="calculateRevenue()" oninput="calculateRevenue()">
                </div>
                
                <div class="form-group">
                    <label for="revenue" style="color: #2c3e50;">Total Serviced Revenue ($):</label>
                    <input type="number" id="revenue" placeholder="Enter revenue amount or calculate above" min="0" step="0.01">
                </div>
                
                <div class="form-group">
                    <label for="cancelation-rate" style="color: #2c3e50;">Cancelation Percentage (%):</label>
                    <input type="number" id="cancelation-rate" placeholder="Enter cancelation rate (e.g., 20 for 20%)" min="0" max="100" step="0.1" value="20">
                </div>
            </div>
            
            <!-- Housing & Duration Card -->
            <div class="calculator-card" style="margin-bottom: 30px; padding: 25px; background: #ffffff; border-radius: 12px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1); color: #2c3e50; border: 2px solid #a10e02;">
                <div style="display: flex; align-items: center; margin-bottom: 20px;">
                    <div style="background: #a10e02; border-radius: 50%; padding: 12px; margin-right: 15px;">
                        <svg width="24" height="24" fill="white" viewBox="0 0 16 16">
                            <path d="M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L2 8.207V13.5A1.5 1.5 0 0 0 3.5 15h9a1.5 1.5 0 0 0 1.5-1.5V8.207l.646.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.707 1.5ZM13 7.207V13.5a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V7.207l5-5 5 5Z"/>
                        </svg>
                    </div>
                    <div>
                        <h3 style="margin: 0; font-size: 1.2em; font-weight: 600; color: #a10e02;">Housing & Duration</h3>
                        <p style="margin: 5px 0 0 0; opacity: 0.7; font-size: 0.9em; color: #6c757d;">Set housing type and selling duration</p>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="months-selling" style="color: #2c3e50;">Months Selling:</label>
                    <input type="number" id="months-selling" placeholder="Enter number of months" min="1" max="12" value="1">
                </div>
                
                <div id="rookie-housing" class="form-group">
                    <label for="housing-type" style="color: #2c3e50;">Housing Type:</label>
                    <select id="housing-type">
                        <option value="shared">Shared Housing ($950/month)</option>
                        <option value="private">Private Housing ($1900/month)</option>
                    </select>
                </div>
                
                <div id="veteran-housing" class="form-group" style="display: none;">
                    <label style="color: #2c3e50;">Veteran Housing: $55/night (29 nights/month)</label>
                </div>
                
                <div id="rookie-accounts" class="form-group">
                    <div class="checkbox-group">
                        <input type="checkbox" id="rent-credit">
                        <label for="rent-credit" style="color: #2c3e50;">Eligible for $3000 rent credit (150+ accounts sold)</label>
                    </div>
                </div>
            </div>
            
            <!-- Requirements Card -->
            <div class="calculator-card" style="margin-bottom: 30px; padding: 25px; background: #ffffff; border-radius: 12px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1); color: #2c3e50; border: 2px solid #a10e02;">
                <div style="display: flex; align-items: center; margin-bottom: 20px;">
                    <div style="background: #a10e02; border-radius: 50%; padding: 12px; margin-right: 15px;">
                        <svg width="24" height="24" fill="white" viewBox="0 0 16 16">
                            <path d="M10.067.87a2.89 2.89 0 0 0-4.134 0l-.622.638-.89-.011a2.89 2.89 0 0 0-2.924 2.924l.01.89-.636.622a2.89 2.89 0 0 0 0 4.134l.637.622-.011.89a2.89 2.89 0 0 0 2.924 2.924l.89-.01.622.636a2.89 2.89 0 0 0 4.134 0l.622-.637.89.011a2.89 2.89 0 0 0 2.924-2.924l-.01-.89.636-.622a2.89 2.89 0 0 0 0-4.134l-.637-.622.011-.89a2.89 2.89 0 0 0-2.924-2.924l-.89.01-.622-.636zm.287 5.984-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7 8.793l2.646-2.647a.5.5 0 0 1 .708.708z"/>
                        </svg>
                    </div>
                    <div>
                        <h3 style="margin: 0; font-size: 1.2em; font-weight: 600; color: #a10e02;">Requirements</h3>
                        <p style="margin: 5px 0 0 0; opacity: 0.7; font-size: 0.9em; color: #6c757d;">Performance requirements to avoid deductions</p>
                    </div>
                </div>
                <div class="two-column">
                    <div class="form-group">
                        <label for="multi-year-rate" style="color: #2c3e50;">Multi-Year Percentage (%):</label>
                        <input type="number" id="multi-year-rate" placeholder="Enter multi-year percentage" min="0" max="100" step="0.1">
                        <small style="color: #dc3545; font-size: 12px; font-weight: 600;">Need 70%+ to avoid $50/account deduction</small>
                    </div>
                    <div class="form-group">
                        <label for="welcome-call-rate" style="color: #2c3e50;">Welcome Call Percentage (%):</label>
                        <input type="number" id="welcome-call-rate" placeholder="Enter welcome call percentage" min="0" max="100" step="0.1">
                        <small style="color: #dc3545; font-size: 12px; font-weight: 600;">Need 90%+ to avoid $50/account deduction</small>
                    </div>
                </div>
            </div>
            
            <button class="calculate-btn" onclick="calculateCommission()">Calculate Commission</button>

            <!-- Next Page Button -->
            <div style="text-align: center; margin-top: 20px;">
                <button class="calculate-btn" onclick="openTab('recruiter')" style="background: linear-gradient(135deg, #a10e02 0%, #5a0701 100%);">
                    Next Page →
                </button>
            </div>

            <div id="commission-result" class="result">
                <div style="margin-bottom: 20px;">
                    <h3 style="margin: 0; color: #000000;">Personal Commission Results</h3>
                </div>
                <div class="result-item">
                    <span>Serviced Revenue:</span>
                    <span id="serviced-revenue">$0.00</span>
                </div>
                <div class="result-item">
                    <span>Active Revenue (after attrition):</span>
                    <span id="active-revenue">$0.00</span>
                </div>
                <div class="result-item">
                    <span>Total Commission Owed:</span>
                    <span id="total-commission-owed">$0.00</span>
                </div>
                <div class="result-item">
                    <span>Gross Upfront Commission:</span>
                    <span id="gross-upfront-commission">$0.00</span>
                </div>
                <div class="result-item">
                    <span>Total Housing Costs:</span>
                    <span id="housing-costs">$0.00</span>
                </div>
                <div class="result-item">
                    <span>Net Upfront Commission:</span>
                    <span id="net-upfront-commission">$0.00</span>
                </div>
                <div class="result-item">
                    <span>Backend Commission Due:</span>
                    <span id="backend-commission">$0.00</span>
                </div>
                <div class="result-item" id="rent-credit-row" style="display: none;">
                    <span>Rent Credit (150+ accounts):</span>
                    <span id="rent-credit-amount">+$3,000.00</span>
                </div>
                <div class="result-item" id="requirement-deductions-row" style="display: none;">
                    <span>Requirement Deductions:</span>
                    <span id="requirement-deductions">-$0.00</span>
                </div>
                <div class="result-item">
                    <span>Net Backend Commission:</span>
                    <span id="net-backend-commission">$0.00</span>
                </div>
                
                <h4 style="margin: 20px 0 10px 0; color: #000000;">Backend Payment Schedule</h4>
                <div class="result-item">
                    <span>Monthly Payments (4 months):</span>
                    <span id="monthly-payment">$0.00</span>
                </div>
                <div class="result-item">
                    <span>Final Payments (2 payments):</span>
                    <span id="final-payment">$0.00</span>
                </div>
                <div class="result-item">
                    <span>Net Commission Total:</span>
                    <span id="net-commission">$0.00</span>
                </div>
                
                <div style="text-align: center; margin-top: 20px; padding-top: 20px; border-top: 1px solid rgba(161, 14, 2, 0.2);">
                    <button class="export-btn" onclick="exportPersonalPDF()">
                        <svg width="16" height="16" fill="white" viewBox="0 0 16 16">
                            <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
                            <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"/>
                        </svg>
                        Export PDF
                    </button>
                </div>
            </div>
            
            <div style="margin-top: 20px; padding: 15px; background: rgba(255, 221, 0, 0.1); border-radius: 8px; border: 1px solid rgba(255, 221, 0, 0.3);">
                <p style="color: #856404; font-size: 14px; margin: 0; text-align: center;">
                    <strong>Note:</strong> This is an estimate based on the inputs provided. Actual compensation may vary based on company policies, performance requirements, and other factors.
                </p>
            </div>
        </div>

        <!-- Recruiter Tab -->
        <div id="recruiter" class="tab-content">
            <p class="subtitle-quote">"Our greatest weakness lies in giving up. The most certain way to succeed is always to try just one more time." — Thomas A. Edison</p>
            <h2>Recruiter Override Calculator</h2>
            
            <!-- COMMENTED OUT: Individual Calculator Card - No longer needed, keeping Team Override Calculator only -->
            <!--
            <div class="calculator-card" style="margin-bottom: 30px; padding: 25px; background: #ffffff; border-radius: 12px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1); color: #2c3e50; border: 2px solid #a10e02;">
                <div style="display: flex; align-items: center; margin-bottom: 20px;">
                    <div style="background: #a10e02; border-radius: 50%; padding: 12px; margin-right: 15px;">
                        <svg width="24" height="24" fill="white" viewBox="0 0 16 16">
                            <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10z"/>
                        </svg>
                    </div>
                    <div>
                        <h3 style="margin: 0; font-size: 1.2em; font-weight: 600; color: #a10e02;">Individual Calculator</h3>
                        <p style="margin: 5px 0 0 0; opacity: 0.7; font-size: 0.9em; color: #6c757d;">Calculate earnings for a single team member</p>
                    </div>
                </div>

                <div class="form-group">
                    <label for="recruiter-year" style="color: #2c3e50;">Recruiter Year:</label>
                    <select id="recruiter-year">
                        <option value="1">1st Year</option>
                        <option value="2">2nd Year</option>
                        <option value="3">3rd Year</option>
                        <option value="4+">4th+ Year</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="recruiter-payscale" style="color: #2c3e50;">Select Payscale:</label>
                    <select id="recruiter-payscale">
                        <option value="veteran">Veteran/Experienced</option>
                        <option value="rookie">Rookie</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="recruiter-rep-revenue" style="color: #2c3e50;">Rep Revenue ($):</label>
                    <input type="number" id="recruiter-rep-revenue" placeholder="Enter rep revenue" min="0" step="0.01">
                </div>

                <div class="form-group">
                    <label for="recruiter-months-worked" style="color: #2c3e50;">Months Worked:</label>
                    <input type="number" id="recruiter-months-worked" placeholder="Enter months worked" min="1" max="12" value="1">
                </div>
            </div>
            -->

            <!-- Team Override Calculator Card -->
            <div class="calculator-card" style="margin-bottom: 30px; padding: 25px; background: #ffffff; border-radius: 12px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1); color: #2c3e50; border: 2px solid #a10e02;">
                <div style="display: flex; align-items: center; margin-bottom: 20px;">
                    <div style="background: #a10e02; border-radius: 50%; padding: 12px; margin-right: 15px;">
                        <svg width="24" height="24" fill="white" viewBox="0 0 16 16">
                            <path d="M15 14s1 0 1-1-1-4-5-4-5 3-5 4 1 1 1 1h8zm-7.978-1A.261.261 0 0 1 7 12.996c.001-.264.167-1.03.76-1.72C8.312 10.629 9.282 10 11 10c1.717 0 2.687.63 3.24 1.276.593.69.758 1.457.76 1.72l-.008.002a.274.274 0 0 1-.014.002H7.022zM11 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm3-2a3 3 0 1 1-6 0 3 3 0 0 1 6 0zM6.936 9.28a5.88 5.88 0 0 0-1.23-.247A7.35 7.35 0 0 0 5 9c-4 0-5 3-5 4 0 .667.333 1 1 1h4.216A2.238 2.238 0 0 1 5 13c0-1.01.377-2.042 1.09-2.904.243-.294.526-.569.846-.816zM4.92 10A5.493 5.493 0 0 0 4 13H1c0-.26.164-1.03.76-1.724.545-.636 1.492-1.256 3.16-1.275zM1.5 5.5a3 3 0 1 1 6 0 3 3 0 0 1-6 0zm3-2a2 2 0 1 0 0 4 2 2 0 0 0 0-4z"/>
                        </svg>
                    </div>
                    <div>
                        <h3 style="margin: 0; font-size: 1.2em; font-weight: 600; color: #a10e02;">Team Override Calculator</h3>
                        <p style="margin: 5px 0 0 0; opacity: 0.7; font-size: 0.9em; color: #6c757d;">Calculate total team performance and overrides</p>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="multi-recruiter-year" style="color: #2c3e50;">Recruiter Year:</label>
                    <select id="multi-recruiter-year">
                        <option value="1">1st Year</option>
                        <option value="2">2nd Year</option>
                        <option value="3">3rd Year</option>
                        <option value="4+">4th+ Year</option>
                    </select>
                </div>
                
                <div class="two-column">
                    <div class="form-group">
                        <label for="rookie-count" style="color: #2c3e50;">Number of Rookies Recruited:</label>
                        <input type="number" id="rookie-count" placeholder="Enter number of rookies" min="0" value="0">
                    </div>
                    <div class="form-group">
                        <label for="vet-count" style="color: #2c3e50;">Number of Veterans Recruited:</label>
                        <input type="number" id="vet-count" placeholder="Enter number of veterans" min="0" value="0">
                    </div>
                </div>
                
                <div class="two-column">
                    <div class="form-group">
                        <label for="rookie-avg-revenue" style="color: #2c3e50;">Average Rookie Revenue ($):</label>
                        <input type="number" id="rookie-avg-revenue" placeholder="Enter average rookie revenue" min="0" step="0.01">
                    </div>
                    <div class="form-group">
                        <label for="vet-avg-revenue" style="color: #2c3e50;">Average Veteran Revenue ($):</label>
                        <input type="number" id="vet-avg-revenue" placeholder="Enter average veteran revenue" min="0" step="0.01">
                    </div>
                </div>
                
                <div class="two-column">
                    <div class="form-group">
                        <label for="rookie-avg-months" style="color: #2c3e50;">Average Rookie Months:</label>
                        <input type="number" id="rookie-avg-months" placeholder="Enter average months" min="1" max="12" value="1">
                    </div>
                    <div class="form-group">
                        <label for="vet-avg-months" style="color: #2c3e50;">Average Veteran Months:</label>
                        <input type="number" id="vet-avg-months" placeholder="Enter average months" min="1" max="12" value="1">
                    </div>
                </div>
            </div>
            
            <button class="calculate-btn" onclick="calculateRecruiter()">Calculate Recruiter Override</button>

            <!-- Next Page Button -->
            <div style="text-align: center; margin-top: 20px;">
                <button class="calculate-btn" onclick="openTab('management')" style="background: linear-gradient(135deg, #a10e02 0%, #5a0701 100%);">
                    Next Page →
                </button>
            </div>

            <div id="recruiter-result" class="result">
                <div style="margin-bottom: 20px;">
                    <h3 style="margin: 0; color: #000000;">Recruiter Override Results</h3>
                </div>
                <div id="single-rep-section">
                    <h4 style="margin: 20px 0 10px 0; color: #000000;">Single Rep Override</h4>
                    <div class="result-item">
                        <span>Recruiter Year:</span>
                        <span id="rec-year">-</span>
                    </div>
                    <div class="result-item">
                        <span>Rep Revenue:</span>
                        <span id="rec-rep-revenue">$0.00</span>
                    </div>
                    <div class="result-item">
                        <span>Final Override Rate:</span>
                        <span id="rec-final-rate">0%</span>
                    </div>
                    <div class="result-item">
                        <span>Single Rep Override:</span>
                        <span id="rec-single-total">$0.00</span>
                    </div>
                </div>
                
                <div id="multiple-recruits-section">
                    <h4 style="margin: 20px 0 10px 0; color: #000000;">Total recruiting override</h4>
                    <div class="result-item">
                        <span>Rookies Override:</span>
                        <span id="rec-rookies-total">$0.00</span>
                    </div>
                    <div class="result-item">
                        <span>Veterans Override:</span>
                        <span id="rec-vets-total">$0.00</span>
                    </div>
                    <div class="result-item">
                        <span>Multiple Recruits Total:</span>
                        <span id="rec-multiple-total">$0.00</span>
                    </div>
                </div>
                
                <h4 style="margin: 20px 0 10px 0; color: #000000;">Grand Total</h4>
                <div class="result-item">
                    <span>Total Override Payment:</span>
                    <span id="rec-grand-total">$0.00</span>
                </div>
                
                <div style="text-align: center; margin-top: 20px; padding-top: 20px; border-top: 1px solid rgba(161, 14, 2, 0.2);">
                    <button class="export-btn" onclick="exportRecruiterPDF()">
                        <svg width="16" height="16" fill="white" viewBox="0 0 16 16">
                            <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
                            <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"/>
                        </svg>
                        Export PDF
                    </button>
                </div>
            </div>
            
            <div style="margin-top: 20px; padding: 15px; background: rgba(255, 221, 0, 0.1); border-radius: 8px; border: 1px solid rgba(255, 221, 0, 0.3);">
                <p style="color: #856404; font-size: 14px; margin: 0; text-align: center;">
                    <strong>Note:</strong> This is an estimate based on the inputs provided. Actual compensation may vary based on company policies, performance requirements, and other factors.
                </p>
            </div>
        </div>

        <!-- Management Tab -->
        <div id="management" class="tab-content">
            <p class="subtitle-quote">"We are what we repeatedly do. Excellence, therefore, is not an act but a habit." - Aristotle</p>
            <h2>Management Override Calculator</h2>
            
            <!-- COMMENTED OUT: Individual Calculator Card - No longer needed, keeping Team Override Calculator only -->
            <!--
            <div class="calculator-card" style="margin-bottom: 30px; padding: 25px; background: #ffffff; border-radius: 12px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1); color: #2c3e50; border: 2px solid #a10e02;">
                <div style="display: flex; align-items: center; margin-bottom: 20px;">
                    <div style="background: #a10e02; border-radius: 50%; padding: 12px; margin-right: 15px;">
                        <svg width="24" height="24" fill="currentColor" viewBox="0 0 16 16">
                            <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10z"/>
                        </svg>
                    </div>
                    <div>
                        <h3 style="margin: 0; font-size: 1.2em; font-weight: 600; color: #a10e02;">Individual Calculator</h3>
                        <p style="margin: 5px 0 0 0; opacity: 0.7; font-size: 0.9em; color: #6c757d;">Calculate earnings for a single team member</p>
                    </div>
                </div>

                <h3 style="margin: 20px 0 15px 0; color: #a10e02; opacity: 1; font-size: 1em; font-weight: 600;">Single Rep Management Override</h3>
                <div class="form-group">
                    <label for="mgmt-payscale" style="color: #2c3e50;">Select Rep Payscale:</label>
                    <select id="mgmt-payscale">
                        <option value="veteran">Veteran/Experienced</option>
                        <option value="rookie">Rookie</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="mgmt-rep-revenue" style="color: #2c3e50;">Rep Revenue ($):</label>
                    <input type="number" id="mgmt-rep-revenue" placeholder="Enter rep revenue" min="0" step="0.01">
                </div>

                <div class="form-group">
                    <label for="mgmt-months-worked" style="color: #2c3e50;">Months Worked:</label>
                    <input type="number" id="mgmt-months-worked" placeholder="Enter months worked" min="1" max="12" value="1">
                </div>
            </div>
            -->

            <!-- Team Override Calculator Card -->
            <div class="calculator-card" style="margin-bottom: 30px; padding: 25px; background: #ffffff; border-radius: 12px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1); color: #2c3e50; border: 2px solid #a10e02;">
                <div style="display: flex; align-items: center; margin-bottom: 20px;">
                    <div style="background: #a10e02; border-radius: 50%; padding: 12px; margin-right: 15px;">
                        <svg width="24" height="24" fill="white" viewBox="0 0 16 16">
                            <path d="M15 14s1 0 1-1-1-4-5-4-5 3-5 4 1 1 1 1h8zm-7.978-1A.261.261 0 0 1 7 12.996c.001-.264.167-1.03.76-1.72C8.312 10.629 9.282 10 11 10c1.717 0 2.687.63 3.24 1.276.593.69.758 1.457.76 1.72l-.008.002a.274.274 0 0 1-.014.002H7.022zM11 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm3-2a3 3 0 1 1-6 0 3 3 0 0 1 6 0zM6.936 9.28a5.88 5.88 0 0 0-1.23-.247A7.35 7.35 0 0 0 5 9c-4 0-5 3-5 4 0 .667.333 1 1 1h4.216A2.238 2.238 0 0 1 5 13c0-1.01.377-2.042 1.09-2.904.243-.294.526-.569.846-.816zM4.92 10A5.493 5.493 0 0 0 4 13H1c0-.26.164-1.03.76-1.724.545-.636 1.492-1.256 3.16-1.275zM1.5 5.5a3 3 0 1 1 6 0 3 3 0 0 1-6 0zm3-2a2 2 0 1 0 0 4 2 2 0 0 0 0-4z"/>
                        </svg>
                    </div>
                    <div>
                        <h3 style="margin: 0; font-size: 1.2em; font-weight: 600; color: #a10e02;">Team Override Calculator</h3>
                        <p style="margin: 5px 0 0 0; opacity: 0.7; font-size: 0.9em; color: #6c757d;">Calculate total team performance and overrides</p>
                    </div>
                </div>
                
                <!-- Team Management Override -->
                <h3 style="margin: 20px 0 15px 0; color: #a10e02; opacity: 0.9; font-size: 1em;">Team Management Override</h3>
                
                <div class="two-column">
                    <div class="form-group">
                        <label for="mgmt-rookie-count" style="color: #2c3e50;">Number of Rookies on Team:</label>
                        <input type="number" id="mgmt-rookie-count" placeholder="Enter number of rookies" min="0" value="0">
                    </div>
                    <div class="form-group">
                        <label for="mgmt-vet-count" style="color: #2c3e50;">Number of Veterans on Team:</label>
                        <input type="number" id="mgmt-vet-count" placeholder="Enter number of veterans" min="0" value="0">
                    </div>
                </div>
                
                <div class="two-column">
                    <div class="form-group">
                        <label for="mgmt-rookie-avg-revenue" style="color: #2c3e50;">Average Rookie Revenue ($):</label>
                        <input type="number" id="mgmt-rookie-avg-revenue" placeholder="Enter average rookie revenue" min="0" step="0.01">
                    </div>
                    <div class="form-group">
                        <label for="mgmt-vet-avg-revenue" style="color: #2c3e50;">Average Veteran Revenue ($):</label>
                        <input type="number" id="mgmt-vet-avg-revenue" placeholder="Enter average veteran revenue" min="0" step="0.01">
                    </div>
                </div>
                
                <div class="two-column">
                    <div class="form-group">
                        <label for="mgmt-rookie-avg-months" style="color: #2c3e50;">Average Rookie Months:</label>
                        <input type="number" id="mgmt-rookie-avg-months" placeholder="Enter average months" min="1" max="12" value="1">
                    </div>
                    <div class="form-group">
                        <label for="mgmt-vet-avg-months" style="color: #2c3e50;">Average Veteran Months:</label>
                        <input type="number" id="mgmt-vet-avg-months" placeholder="Enter average months" min="1" max="12" value="1">
                    </div>
                </div>
            </div>
            
            <button class="calculate-btn" onclick="calculateManagement()">Calculate Management Override</button>

            <!-- Next Page Button -->
            <div style="text-align: center; margin-top: 20px;">
                <button class="calculate-btn" onclick="openTab('profit-share')" style="background: linear-gradient(135deg, #a10e02 0%, #5a0701 100%);">
                    Next Page →
                </button>
            </div>

            <div id="management-result" class="result">
                <div style="margin-bottom: 20px;">
                    <h3 style="margin: 0; color: #000000;">Management Override Results</h3>
                </div>
                <div id="single-mgmt-section">
                    <h4 style="margin: 20px 0 10px 0; color: #000000;">Single Rep Override</h4>
                    <div class="result-item">
                        <span>Rep Payscale:</span>
                        <span id="mgmt-payscale-result">-</span>
                    </div>
                    <div class="result-item">
                        <span>Rep Revenue:</span>
                        <span id="mgmt-rep-revenue-result">$0.00</span>
                    </div>
                    <div class="result-item">
                        <span>Management Override Rate:</span>
                        <span id="mgmt-override-rate">0%</span>
                    </div>
                    <div class="result-item">
                        <span>Single Rep Override:</span>
                        <span id="mgmt-single-total">$0.00</span>
                    </div>
                </div>
                
                <div id="team-mgmt-section">
                    <h4 style="margin: 20px 0 10px 0; color: #000000;">Team Management Override</h4>
                    <div class="result-item">
                        <span>Rookies Override:</span>
                        <span id="mgmt-rookies-total">$0.00</span>
                    </div>
                    <div class="result-item">
                        <span>Veterans Override:</span>
                        <span id="mgmt-vets-total">$0.00</span>
                    </div>
                    <div class="result-item">
                        <span>Team Override Total:</span>
                        <span id="mgmt-team-total">$0.00</span>
                    </div>
                </div>
                
                <h4 style="margin: 20px 0 10px 0; color: #000000;">Grand Total</h4>
                <div class="result-item">
                    <span>Total Management Override:</span>
                    <span id="mgmt-grand-total">$0.00</span>
                </div>
                
                <div style="text-align: center; margin-top: 20px; padding-top: 20px; border-top: 1px solid rgba(161, 14, 2, 0.2);">
                    <button class="export-btn" onclick="exportManagementPDF()">
                        <svg width="16" height="16" fill="white" viewBox="0 0 16 16">
                            <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
                            <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"/>
                        </svg>
                        Export PDF
                    </button>
                </div>
            </div>
            
            <div style="margin-top: 20px; padding: 15px; background: rgba(255, 221, 0, 0.1); border-radius: 8px; border: 1px solid rgba(255, 221, 0, 0.3);">
                <p style="color: #856404; font-size: 14px; margin: 0; text-align: center;">
                    <strong>Note:</strong> This is an estimate based on the inputs provided. Actual compensation may vary based on company policies, performance requirements, and other factors.
                </p>
            </div>
        </div>

        <!-- Profit Share Tab -->
        <div id="profit-share" class="tab-content">
            <p class="subtitle-quote">"Quality performance starts with a positive attitude" - Jeffrey Gitomer</p>
            <h2>Profit Share Calculator</h2>
            
            <!-- COMMENTED OUT: Individual Calculator Card - No longer needed, keeping Team Calculator only -->
            <!--
            <div class="calculator-card" style="margin-bottom: 30px; padding: 25px; background: #ffffff; border-radius: 12px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1); color: #2c3e50; border: 2px solid #a10e02;">
                <div style="display: flex; align-items: center; margin-bottom: 20px;">
                    <div style="background: #a10e02; border-radius: 50%; padding: 12px; margin-right: 15px;">
                        <svg width="24" height="24" fill="white" viewBox="0 0 16 16">
                            <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10z"/>
                        </svg>
                    </div>
                    <div>
                        <h3 style="margin: 0; font-size: 1.2em; font-weight: 600; color: #a10e02;">Individual Calculator</h3>
                        <p style="margin: 5px 0 0 0; opacity: 0.7; font-size: 0.9em; color: #6c757d;">Calculate earnings for a single team member</p>
                    </div>
                </div>

                <h3 style="margin: 20px 0 15px 0; color: #a10e02; opacity: 1; font-size: 1em; font-weight: 600;">Rep Information</h3>
                <div class="two-column">
                    <div class="form-group">
                        <label for="ps-payscale" style="color: #2c3e50;">Rep Payscale:</label>
                        <select id="ps-payscale">
                            <option value="rookie">Rookie (16% base)</option>
                            <option value="veteran">Veteran (14% base)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="ps-active-revenue" style="color: #2c3e50;">Active Revenue ($):</label>
                        <input type="number" id="ps-active-revenue" placeholder="Enter active revenue" min="0" step="0.01">
                    </div>
                </div>

                <div class="form-group">
                    <label for="ps-months-worked" style="color: #2c3e50;">Months Worked:</label>
                    <input type="number" id="ps-months-worked" placeholder="Enter months worked" min="1" max="12" value="1">
                </div>
            </div>
            -->

            <!-- Your Profit Share Percentage Card -->
            <div class="calculator-card" style="margin-bottom: 30px; padding: 25px; background: #ffffff; border-radius: 12px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1); color: #2c3e50; border: 2px solid #a10e02;">
                <div style="display: flex; align-items: center; margin-bottom: 20px;">
                    <div style="background: #a10e02; border-radius: 50%; padding: 12px; margin-right: 15px;">
                        <svg width="24" height="24" fill="white" viewBox="0 0 16 16">
                            <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3v-3z"/>
                        </svg>
                    </div>
                    <div>
                        <h3 style="margin: 0; font-size: 1.2em; font-weight: 600; color: #a10e02;">Your Profit Share Percentage</h3>
                        <p style="margin: 5px 0 0 0; opacity: 0.7; font-size: 0.9em; color: #6c757d;">Enter your personal profit share percentage</p>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="your-ps-percentage" style="color: #2c3e50;">Your Profit Share Percentage (%):</label>
                    <input type="number" id="your-ps-percentage" placeholder="Enter your percentage" min="0" max="100" step="0.1">
                </div>
            </div>
            
            <!-- Downline Profit Share Card -->
            <div class="calculator-card" style="margin-bottom: 30px; padding: 25px; background: #ffffff; border-radius: 12px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1); color: #2c3e50; border: 2px solid #a10e02;">
                <div style="display: flex; align-items: center; margin-bottom: 20px;">
                    <div style="background: #a10e02; border-radius: 50%; padding: 12px; margin-right: 15px;">
                        <svg width="24" height="24" fill="white" viewBox="0 0 16 16">
                            <path d="M6 0a.5.5 0 0 1 .5.5V3h3V.5a.5.5 0 0 1 1 0V3h1a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5H10v1.5a.5.5 0 0 1-1 0V7H6.5v1.5a.5.5 0 0 1-1 0V7H4a.5.5 0 0 1-.5-.5v-3A.5.5 0 0 1 4 3h1V.5A.5.5 0 0 1 6 0zM4.5 4v2h7V4h-7z"/>
                            <path d="M6 8.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V9a.5.5 0 0 1 .5-.5z"/>
                            <path d="M10.5 8a.5.5 0 0 0-.5.5V17a.5.5 0 0 0 1 0V8.5a.5.5 0 0 0-.5-.5z"/>
                        </svg>
                    </div>
                    <div>
                        <h3 style="margin: 0; font-size: 1.2em; font-weight: 600; color: #a10e02;">Downline Profit Share</h3>
                        <p style="margin: 5px 0 0 0; opacity: 0.7; font-size: 0.9em; color: #6c757d;">Optional percentage from those below you in the hierarchy</p>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="downline-percentage" style="color: #2c3e50;">Downline Profit Share Percentage (%):</label>
                    <input type="number" id="downline-percentage" placeholder="Enter percentage (leave empty if no one below you)" min="0" max="100" step="0.1">
                    <small style="color: #6c757d; font-size: 12px; font-style: italic;">Leave empty if no one is below you in the downline</small>
                </div>
            </div>
            
            <!-- Team Override Calculator Card -->
            <div class="calculator-card" style="margin-bottom: 30px; padding: 25px; background: #ffffff; border-radius: 12px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1); color: #2c3e50; border: 2px solid #a10e02;">
                <div style="display: flex; align-items: center; margin-bottom: 20px;">
                    <div style="background: #a10e02; border-radius: 50%; padding: 12px; margin-right: 15px;">
                        <svg width="24" height="24" fill="white" viewBox="0 0 16 16">
                            <path d="M15 14s1 0 1-1-1-4-5-4-5 3-5 4 1 1 1 1h8zm-7.978-1A.261.261 0 0 1 7 12.996c.001-.264.167-1.03.76-1.72C8.312 10.629 9.282 10 11 10c1.717 0 2.687.63 3.24 1.276.593.69.758 1.457.76 1.72l-.008.002a.274.274 0 0 1-.014.002H7.022zM11 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm3-2a3 3 0 1 1-6 0 3 3 0 0 1 6 0zM6.936 9.28a5.88 5.88 0 0 0-1.23-.247A7.35 7.35 0 0 0 5 9c-4 0-5 3-5 4 0 .667.333 1 1 1h4.216A2.238 2.238 0 0 1 5 13c0-1.01.377-2.042 1.09-2.904.243-.294.526-.569.846-.816zM4.92 10A5.493 5.493 0 0 0 4 13H1c0-.26.164-1.03.76-1.724.545-.636 1.492-1.256 3.16-1.275zM1.5 5.5a3 3 0 1 1 6 0 3 3 0 0 1-6 0zm3-2a2 2 0 1 0 0 4 2 2 0 0 0 0-4z"/>
                        </svg>
                    </div>
                    <div>
                        <h3 style="margin: 0; font-size: 1.2em; font-weight: 600; color: #a10e02;">Team Override Calculator</h3>
                        <p style="margin: 5px 0 0 0; opacity: 0.7; font-size: 0.9em; color: #6c757d;">Calculate total team performance and overrides</p>
                    </div>
                </div>
                
                <!-- Team Profit Share -->
                <h3 style="margin: 20px 0 15px 0; color: #a10e02; opacity: 0.9; font-size: 1em;">Team Profit Share</h3>
                
                <div class="two-column">
                    <div class="form-group">
                        <label for="ps-rookie-count" style="color: #2c3e50;">Number of Rookies on Team:</label>
                        <input type="number" id="ps-rookie-count" placeholder="Enter number of rookies" min="0" value="0">
                    </div>
                    <div class="form-group">
                        <label for="ps-vet-count" style="color: #2c3e50;">Number of Veterans on Team:</label>
                        <input type="number" id="ps-vet-count" placeholder="Enter number of veterans" min="0" value="0">
                    </div>
                </div>
                
                <div class="two-column">
                    <div class="form-group">
                        <label for="ps-rookie-avg-revenue" style="color: #2c3e50;">Average Rookie Revenue ($):</label>
                        <input type="number" id="ps-rookie-avg-revenue" placeholder="Enter average rookie revenue" min="0" step="0.01">
                    </div>
                    <div class="form-group">
                        <label for="ps-vet-avg-revenue" style="color: #2c3e50;">Average Veteran Revenue ($):</label>
                        <input type="number" id="ps-vet-avg-revenue" placeholder="Enter average veteran revenue" min="0" step="0.01">
                    </div>
                </div>
                
                <div class="two-column">
                    <div class="form-group">
                        <label for="ps-rookie-avg-months" style="color: #2c3e50;">Average Rookie Months:</label>
                        <input type="number" id="ps-rookie-avg-months" placeholder="Enter average months" min="1" max="12" value="1">
                    </div>
                    <div class="form-group">
                        <label for="ps-vet-avg-months" style="color: #2c3e50;">Average Veteran Months:</label>
                        <input type="number" id="ps-vet-avg-months" placeholder="Enter average months" min="1" max="12" value="1">
                    </div>
                </div>
            </div>
            
            <button class="calculate-btn" onclick="calculateProfitShare()">Calculate Profit Share</button>

            <!-- Next Page Button -->
            <div style="text-align: center; margin-top: 20px;">
                <button class="calculate-btn" onclick="openTab('step-bonus')" style="background: linear-gradient(135deg, #a10e02 0%, #5a0701 100%);">
                    Next Page →
                </button>
            </div>

            <div id="profit-share-result" class="result">
                <div style="margin-bottom: 20px;">
                    <h3 style="margin: 0; color: #000000;">Profit Share Results</h3>
                </div>
                <div id="single-ps-section">
                    <h4 style="margin: 20px 0 10px 0; color: #000000;">Single Rep Profit Share</h4>
                    <div class="result-item">
                        <span>Rep Payscale:</span>
                        <span id="ps-payscale-result">-</span>
                    </div>
                    <div class="result-item">
                        <span>Active Revenue:</span>
                        <span id="ps-active-revenue-result">$0.00</span>
                    </div>
                    <div class="result-item">
                        <span>Base Profit Share Rate:</span>
                        <span id="ps-base-rate">0%</span>
                    </div>
                    <div class="result-item">
                        <span>Performance Adjustment:</span>
                        <span id="ps-performance-adjustment">100%</span>
                    </div>
                    <div class="result-item">
                        <span>Adjusted Base Rate:</span>
                        <span id="ps-adjusted-base-rate">0%</span>
                    </div>
                    <div class="result-item">
                        <span>Your Profit Share %:</span>
                        <span id="ps-your-percentage">0%</span>
                    </div>
                    <div class="result-item">
                        <span>Downline %:</span>
                        <span id="ps-downline-percentage">0%</span>
                    </div>
                    <div class="result-item">
                        <span>Your Effective Rate:</span>
                        <span id="ps-effective-rate">0%</span>
                    </div>
                    <div class="result-item">
                        <span>Single Rep Profit Share:</span>
                        <span id="ps-single-amount">$0.00</span>
                    </div>
                </div>
                
                <div id="team-ps-section">
                    <h4 style="margin: 20px 0 10px 0; color: #000000;">Team Profit Share</h4>
                    <div class="result-item">
                        <span>Rookies Profit Share:</span>
                        <span id="ps-rookies-total">$0.00</span>
                    </div>
                    <div class="result-item">
                        <span>Veterans Profit Share:</span>
                        <span id="ps-vets-total">$0.00</span>
                    </div>
                    <div class="result-item">
                        <span>Team Profit Share Total:</span>
                        <span id="ps-team-total">$0.00</span>
                    </div>
                </div>
                
                <h4 style="margin: 20px 0 10px 0; color: #000000;">Grand Total</h4>
                <div class="result-item">
                    <span>Total Profit Share:</span>
                    <span id="ps-total-amount">$0.00</span>
                </div>
                
                <div style="text-align: center; margin-top: 20px; padding-top: 20px; border-top: 1px solid rgba(161, 14, 2, 0.2);">
                    <button class="export-btn" onclick="exportProfitSharePDF()">
                        <svg width="16" height="16" fill="white" viewBox="0 0 16 16">
                            <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
                            <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"/>
                        </svg>
                        Export PDF
                    </button>
                </div>
            </div>
            
            <div style="margin-top: 20px; padding: 15px; background: rgba(255, 221, 0, 0.1); border-radius: 8px; border: 1px solid rgba(255, 221, 0, 0.3);">
                <p style="color: #856404; font-size: 14px; margin: 0; text-align: center;">
                    <strong>Note:</strong> This is an estimate based on the inputs provided. Actual compensation may vary based on company policies, performance requirements, and other factors.
                </p>
            </div>
        </div>

        <!-- Step Bonus Tab -->
        <div id="step-bonus" class="tab-content">
            <p class="subtitle-quote">"Sales are contingent upon the attitude of the salesman, not the attitude of the prospect." – William Clement Stone</p>
            <h2>Step Bonus Calculator</h2>
            
            <!-- Revenue Information Card -->
            <div class="calculator-card" style="margin-bottom: 30px; padding: 25px; background: #ffffff; border-radius: 12px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1); color: #2c3e50; border: 2px solid #a10e02;">
                <div style="display: flex; align-items: center; margin-bottom: 20px;">
                    <div style="background: #a10e02; border-radius: 50%; padding: 12px; margin-right: 15px;">
                        <svg width="24" height="24" fill="white" viewBox="0 0 16 16">
                            <path d="M0 1.5A1.5 1.5 0 0 1 1.5 0h13A1.5 1.5 0 0 1 16 1.5v3A1.5 1.5 0 0 1 14.5 6h-13A1.5 1.5 0 0 1 0 4.5v-3zM1.5 1a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h13a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-13z"/>
                            <path d="M2 2.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zM0 8.5A1.5 1.5 0 0 1 1.5 7h13A1.5 1.5 0 0 1 16 8.5v5a1.5 1.5 0 0 1-1.5 1.5h-13A1.5 1.5 0 0 1 0 13.5v-5zM1.5 8a.5.5 0 0 0-.5.5v5a.5.5 0 0 0 .5.5h13a.5.5 0 0 0 .5-.5v-5a.5.5 0 0 0-.5-.5h-13z"/>
                            <path d="M2 9.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5z"/>
                        </svg>
                    </div>
                    <div>
                        <h3 style="margin: 0; font-size: 1.2em; font-weight: 600; color: #a10e02;">Revenue Information</h3>
                        <p style="margin: 5px 0 0 0; opacity: 0.7; font-size: 0.9em; color: #6c757d;">Enter your team and personal revenue data</p>
                    </div>
                </div>
                
                <div class="two-column">
                    <div class="form-group">
                        <label for="sb-service-revenue" style="color: #2c3e50;">Team Serviced Revenue ($):</label>
                        <input type="number" id="sb-service-revenue" placeholder="Enter team serviced revenue" min="0" step="0.01">
                    </div>
                    <div class="form-group">
                        <label for="sb-personal-revenue" style="color: #2c3e50;">Personal Revenue ($):</label>
                        <input type="number" id="sb-personal-revenue" placeholder="Enter personal revenue" min="0" step="0.01">
                    </div>
                </div>
            </div>
            
            <!-- Qualification Status Card -->
            <div class="calculator-card" style="margin-bottom: 30px; padding: 25px; background: #ffffff; border-radius: 12px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1); color: #2c3e50; border: 2px solid #a10e02;">
                <div style="display: flex; align-items: center; margin-bottom: 20px;">
                    <div style="background: #a10e02; border-radius: 50%; padding: 12px; margin-right: 15px;">
                        <svg width="24" height="24" fill="white" viewBox="0 0 16 16">
                            <path d="M9.669.864 8 0 6.331.864l-1.858.282-.842 1.68-1.337 1.32L2.6 6l-.306 1.854 1.337 1.32.842 1.68 1.858.282L8 12l1.669-.864 1.858-.282.842-1.68 1.337-1.32L13.4 6l.306-1.854-1.337-1.32-.842-1.68L9.669.864zm1.196 1.193.684 1.365 1.086 1.072L12.387 6l.248 1.506-1.086 1.072-.684 1.365-1.51.229L8 10.874l-1.355-.702-1.51-.229-.684-1.365-1.086-1.072L3.614 6l-.25-1.506 1.087-1.072.684-1.365 1.51-.229L8 1.126l1.356.702 1.509.229z"/>
                            <path d="M4 11.794V16l4-1 4 1v-4.206l-2.018.306L8 13.126 6.018 12.1 4 11.794z"/>
                        </svg>
                    </div>
                    <div>
                        <h3 style="margin: 0; font-size: 1.2em; font-weight: 600; color: #a10e02;">Qualification Status</h3>
                        <p style="margin: 5px 0 0 0; opacity: 0.7; font-size: 0.9em; color: #6c757d;">Set your step bonus qualification details</p>
                    </div>
                </div>
                
                <div class="checkbox-group">
                    <input type="checkbox" id="first-year-qualifying">
                    <label for="first-year-qualifying" style="color: #2c3e50;">This is my first year qualifying for step bonus</label>
                </div>
                <p style="color: #6c757d; margin: 10px 0; font-size: 14px;">If checked, you'll receive your qualifying tier bonus plus the one below what you qualified for.</p>
            </div>
            
            <button class="calculate-btn" onclick="calculateStepBonus()">Calculate Step Bonus</button>

            <!-- View Summary Button -->
            <div style="text-align: center; margin-top: 20px;">
                <button class="calculate-btn" onclick="openTab('summary')" style="background: linear-gradient(135deg, #a10e02 0%, #5a0701 100%);">
                    View Summary →
                </button>
            </div>

            <div id="step-bonus-result" class="result">
                <div style="margin-bottom: 20px;">
                    <h3 style="margin: 0; color: #000000;">Step Bonus Results</h3>
                </div>
                <h4 style="margin: 20px 0 10px 0; color: #000000;">Qualification Results</h4>
                <div class="result-item">
                    <span>Highest Tier Achieved:</span>
                    <span id="sb-highest-tier">None</span>
                </div>
                <div class="result-item">
                    <span>First Year Qualifying:</span>
                    <span id="sb-first-year-status">No</span>
                </div>
                
                <h4 style="margin: 20px 0 10px 0; color: #000000;">Bonus Breakdown</h4>
                <div id="sb-bonus-breakdown">
                    <!-- Bonus items will be populated here -->
                </div>
                
                <h4 style="margin: 20px 0 10px 0; color: #000000;">Total</h4>
                <div class="result-item">
                    <span>Total Step Bonus:</span>
                    <span id="sb-total-bonus">$0.00</span>
                </div>
                
                <div style="text-align: center; margin-top: 20px; padding-top: 20px; border-top: 1px solid rgba(161, 14, 2, 0.2);">
                    <button class="export-btn" onclick="exportStepBonusPDF()">
                        <svg width="16" height="16" fill="white" viewBox="0 0 16 16">
                            <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
                            <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"/>
                        </svg>
                        Export PDF
                    </button>
                </div>
            </div>
            
            <div style="margin-top: 20px; padding: 15px; background: rgba(255, 221, 0, 0.1); border-radius: 8px; border: 1px solid rgba(255, 221, 0, 0.3);">
                <p style="color: #856404; font-size: 14px; margin: 0; text-align: center;">
                    <strong>Note:</strong> This is an estimate based on the inputs provided. Actual compensation may vary based on company policies, performance requirements, and other factors.
                </p>
            </div>
        </div>

        <!-- Summary Tab -->
        <div id="summary" class="tab-content">
            <p class="subtitle-quote">"You miss 100% of the shots you don't take." – Wayne Gretzky</p>
            <h2>Total Compensation Summary</h2>
            
            <!-- Calculate Button Card -->
            <div class="calculator-card" style="margin-bottom: 30px; padding: 25px; background: #ffffff; border-radius: 12px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1); color: #2c3e50; border: 2px solid #a10e02;">
                <div style="display: flex; align-items: center; margin-bottom: 20px;">
                    <div style="background: #a10e02; border-radius: 50%; padding: 12px; margin-right: 15px;">
                        <svg width="24" height="24" fill="white" viewBox="0 0 16 16">
                            <path d="M1.92.506a.5.5 0 0 1 .434.14L3 1.293l.646-.647a.5.5 0 0 1 .708 0L5 1.293l.646-.647a.5.5 0 0 1 .708 0L7 1.293l.646-.647a.5.5 0 0 1 .708 0L9 1.293l.646-.647a.5.5 0 0 1 .708 0l.646.647.646-.647a.5.5 0 0 1 .708 0l.646.647.646-.647a.5.5 0 0 1 .801.13l.5 1A.5.5 0 0 1 15 2v12a.5.5 0 0 1-.053.224l-.5 1a.5.5 0 0 1-.8.13L13 14.707l-.646.647a.5.5 0 0 1-.708 0L11 14.707l-.646.647a.5.5 0 0 1-.708 0L9 14.707l-.646.647a.5.5 0 0 1-.708 0L7 14.707l-.646.647a.5.5 0 0 1-.708 0L5 14.707l-.646.647a.5.5 0 0 1-.708 0L3 14.707l-.646.647a.5.5 0 0 1-.801-.13l-.5-1A.5.5 0 0 1 1 14V2a.5.5 0 0 1 .053-.224l.5-1a.5.5 0 0 1 .367-.27zm.217 1.338L2 2.118v11.764l.137.274.51-.51a.5.5 0 0 1 .707 0l.646.647.646-.646a.5.5 0 0 1 .708 0l.646.646.646-.646a.5.5 0 0 1 .708 0l.646.646.646-.646a.5.5 0 0 1 .708 0l.646.646.646-.646a.5.5 0 0 1 .708 0l.646.646.646-.646a.5.5 0 0 1 .708 0l.509.509.137-.274V2.118l-.137-.274-.51.51a.5.5 0 0 1-.707 0L12 1.707l-.646.647a.5.5 0 0 1-.708 0L10 1.707l-.646.647a.5.5 0 0 1-.708 0L8 1.707l-.646.647a.5.5 0 0 1-.708 0L6 1.707l-.646.647a.5.5 0 0 1-.708 0L4 1.707l-.646.647a.5.5 0 0 1-.708 0l-.509-.51z"/>
                            <path d="M3 4.5a.5.5 0 0 1 .5-.5h6a.5.5 0 1 1 0 1h-6a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h6a.5.5 0 1 1 0 1h-6a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h6a.5.5 0 1 1 0 1h-6a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5zm8-6a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5z"/>
                        </svg>
                    </div>
                    <div>
                        <h3 style="margin: 0; font-size: 1.2em; font-weight: 600; color: #a10e02;">Generate Summary</h3>
                        <p style="margin: 5px 0 0 0; opacity: 0.7; font-size: 0.9em; color: #6c757d;">Calculate your total compensation across all categories</p>
                    </div>
                </div>
                
                <div style="text-align: center;">
                    <button class="calculate-btn" onclick="calculateSummary()">Calculate Total Compensation</button>
                </div>
            </div>
            
            <div id="summary-result" class="result">
                <!-- Compensation Breakdown Card -->
                <div class="calculator-card" style="margin-bottom: 30px; padding: 25px; background: #ffffff; border-radius: 12px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1); color: #2c3e50; border: 2px solid #a10e02;">
                    <div style="display: flex; align-items: center; margin-bottom: 20px;">
                        <div style="background: #a10e02; border-radius: 50%; padding: 12px; margin-right: 15px;">
                            <svg width="24" height="24" fill="white" viewBox="0 0 16 16">
                                <path d="M1.5 1A1.5 1.5 0 0 0 0 2.5v4A1.5 1.5 0 0 0 1.5 8h13A1.5 1.5 0 0 0 16 6.5v-4A1.5 1.5 0 0 0 14.5 1h-13zM1.5 2h13a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5v-4a.5.5 0 0 1 .5-.5z"/>
                                <path d="M2 3a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3A.5.5 0 0 1 2 3zm0 2a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 2 5zm0 2a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1A.5.5 0 0 1 2 7z"/>
                                <path d="M1.5 9A1.5 1.5 0 0 0 0 10.5v3A1.5 1.5 0 0 0 1.5 15h13a1.5 1.5 0 0 0 1.5-1.5v-3A1.5 1.5 0 0 0 14.5 9h-13zM1.5 10h13a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5v-3a.5.5 0 0 1 .5-.5z"/>
                                <path d="M2 11a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5z"/>
                            </svg>
                        </div>
                        <div>
                            <h3 style="margin: 0; font-size: 1.2em; font-weight: 600; color: #a10e02;">Compensation Breakdown</h3>
                            <p style="margin: 5px 0 0 0; opacity: 0.7; font-size: 0.9em; color: #6c757d;">Detailed breakdown by category</p>
                        </div>
                    </div>
                
                <div id="commission-summary" class="summary-section">
                    <h4 style="margin: 15px 0 10px 0; color: #000000;">Commission Calculator</h4>
                    <div class="result-item">
                        <span>Status:</span>
                        <span id="commission-status">Not Calculated</span>
                    </div>
                    <div class="result-item">
                        <span>Net Commission Total:</span>
                        <span id="commission-total">$0.00</span>
                    </div>
                </div>
                
                <div id="recruiter-summary" class="summary-section">
                    <h4 style="margin: 15px 0 10px 0; color: #000000;">Recruiter Override</h4>
                    <div class="result-item">
                        <span>Status:</span>
                        <span id="recruiter-status">Not Calculated</span>
                    </div>
                    <div class="result-item">
                        <span>Total Override Payment:</span>
                        <span id="recruiter-total">$0.00</span>
                    </div>
                </div>
                
                <div id="management-summary" class="summary-section">
                    <h4 style="margin: 15px 0 10px 0; color: #000000;">Management Override</h4>
                    <div class="result-item">
                        <span>Status:</span>
                        <span id="management-status">Not Calculated</span>
                    </div>
                    <div class="result-item">
                        <span>Total Management Override:</span>
                        <span id="management-total">$0.00</span>
                    </div>
                </div>
                
                <div id="profit-share-summary" class="summary-section">
                    <h4 style="margin: 15px 0 10px 0; color: #000000;">Profit Share</h4>
                    <div class="result-item">
                        <span>Status:</span>
                        <span id="profit-share-status">Not Calculated</span>
                    </div>
                    <div class="result-item">
                        <span>Total Profit Share:</span>
                        <span id="profit-share-total">$0.00</span>
                    </div>
                </div>
                
                <div id="step-bonus-summary" class="summary-section">
                    <h4 style="margin: 15px 0 10px 0; color: #000000;">Step Bonus</h4>
                    <div class="result-item">
                        <span>Status:</span>
                        <span id="step-bonus-status">Not Calculated</span>
                    </div>
                    <div class="result-item">
                        <span>Total Step Bonus:</span>
                        <span id="step-bonus-total">$0.00</span>
                    </div>
                </div>
                </div>
                
                <!-- Grand Total Card -->
                <div class="calculator-card" style="margin-bottom: 30px; padding: 25px; background: #ffffff; border-radius: 12px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1); color: #2c3e50; border: 2px solid #a10e02;">
                    <div style="display: flex; align-items: center; margin-bottom: 20px;">
                        <div style="background: #a10e02; border-radius: 50%; padding: 12px; margin-right: 15px;">
                            <svg width="24" height="24" fill="white" viewBox="0 0 16 16">
                                <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                                <path d="M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286zm1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94z"/>
                            </svg>
                        </div>
                        <div>
                            <h3 style="margin: 0; font-size: 1.2em; font-weight: 600; color: #a10e02;">Total Compensation</h3>
                            <p style="margin: 5px 0 0 0; opacity: 0.7; font-size: 0.9em; color: #6c757d;">Your estimated total earnings</p>
                        </div>
                    </div>
                    
                    <div style="text-align: center; border-top: 3px solid #a10e02; padding-top: 20px;">
                        <div style="font-size: 1.65em; font-weight: bold; color: #155724;">
                            <span style="margin-bottom: 8px; display: block; width: 100%;">TOTAL ESTIMATED COMPENSATION:</span>
                            <span id="grand-total" style="font-size: 1.6em; color: #a10e02; display: block; width: 100%; text-align: center; margin-top: 10px;">$0.00</span>
                        </div>
                    </div>
                </div>
                
                <!-- Disclaimer Card -->
                <div class="calculator-card" style="margin-bottom: 30px; padding: 25px; background: #fff8e1; border-radius: 12px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1); color: #2c3e50; border: 2px solid #ffc107;">
                    <div style="display: flex; align-items: center; margin-bottom: 15px;">
                        <div style="background: #ffc107; border-radius: 50%; padding: 12px; margin-right: 15px;">
                            <svg width="24" height="24" fill="white" viewBox="0 0 16 16">
                                <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
                            </svg>
                        </div>
                        <div>
                            <h3 style="margin: 0; font-size: 1.2em; font-weight: 600; color: #856404;">Important Notice</h3>
                            <p style="margin: 5px 0 0 0; opacity: 0.8; font-size: 0.9em; color: #6c757d;">Please read the following disclaimer</p>
                        </div>
                    </div>
                    
                    <p style="color: #856404; font-size: 14px; margin: 0; text-align: center;">
                        <strong>Note:</strong> This is an estimate based on the inputs provided. Actual compensation may vary based on company policies, performance requirements, and other factors.
                    </p>
                </div>
                
                <!-- Export PDF Button -->
                <div style="text-align: center; margin-top: 20px; padding-top: 20px; border-top: 1px solid rgba(161, 14, 2, 0.2);">
                    <button class="export-btn" onclick="exportSummaryPDF()">
                        <svg width="16" height="16" fill="white" viewBox="0 0 16 16">
                            <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
                            <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"/>
                        </svg>
                        Export PDF
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ============================================
        // AUTHENTICATION AND PERMISSION MANAGEMENT
        // ============================================

        // Check authentication on page load
        function checkAuth() {
            const session = localStorage.getItem('gritSession');
            if (!session) {
                // Not logged in, redirect to login
                window.location.href = 'login.html';
                return null;
            }
            return JSON.parse(session);
        }

        // Initialize session and setup permissions
        const currentSession = checkAuth();
        if (currentSession) {
            // Display user info
            const displayName = currentSession.firstName && currentSession.lastName ? 
                `${currentSession.firstName} ${currentSession.lastName}` : 
                currentSession.email;
            document.getElementById('logged-in-email').textContent = displayName;
            const roleBadge = document.getElementById('logged-in-role');
            roleBadge.textContent = currentSession.role;
            roleBadge.className = 'user-role-badge role-' + currentSession.role.toLowerCase();

            // Show admin portal link only for admins
            if (currentSession.role === 'Admin') {
                document.getElementById('admin-link').style.display = 'inline-block';
                document.getElementById('nav-admin').style.display = 'flex';
            }

            // Show CRM link for Veteran, Manager, and Admin users
            if (['Veteran', 'Manager', 'Admin'].includes(currentSession.role)) {
                document.getElementById('crm-link').style.display = 'inline-block';
                document.getElementById('nav-crm').style.display = 'flex';
            }

            // Apply role-based tab visibility
            applyPermissions(currentSession.role);
        }

        // Apply permissions based on user role
        function applyPermissions(role) {
            // Get all sidebar nav items
            const navRecruiter = document.getElementById('nav-recruiter');
            const navManagement = document.getElementById('nav-management');
            const navProfitShare = document.getElementById('nav-profit-share');
            const navStepBonus = document.getElementById('nav-step-bonus');
            const navSummary = document.getElementById('nav-summary');

            if (role === 'Rookie' || role === 'Veteran') {
                // Rookies and Veterans only see Personal and Recruiter tabs
                navRecruiter.style.display = 'flex';
                navManagement.style.display = 'none';
                navProfitShare.style.display = 'none';
                navStepBonus.style.display = 'none';
                navSummary.style.display = 'none';
            } else if (role === 'Manager' || role === 'Admin') {
                // Managers and Admins see all tabs
                navRecruiter.style.display = 'flex';
                navManagement.style.display = 'flex';
                navProfitShare.style.display = 'flex';
                navStepBonus.style.display = 'flex';
                navSummary.style.display = 'flex';
            }

            // Apply field-level restrictions for Rookies
            if (role === 'Rookie') {
                applyRookieRestrictions();
            }
        }

        // Apply field restrictions for Rookie users
        function applyRookieRestrictions() {
            // Restrict Personal page payscale dropdown to Rookie only
            const payscaleDropdown = document.getElementById('payscale');
            if (payscaleDropdown) {
                const veteranOption = payscaleDropdown.querySelector('option[value="veteran"]');
                const returnRepOption = payscaleDropdown.querySelector('option[value="return-rep"]');

                if (veteranOption) veteranOption.style.display = 'none';
                if (returnRepOption) returnRepOption.style.display = 'none';

                // Auto-select Rookie
                payscaleDropdown.value = 'rookie';
            }

            // Restrict Recruiter page year dropdown to 1st Year only
            const recruiterYearDropdown = document.getElementById('multi-recruiter-year');
            if (recruiterYearDropdown) {
                const year2 = recruiterYearDropdown.querySelector('option[value="2"]');
                const year3 = recruiterYearDropdown.querySelector('option[value="3"]');
                const year4plus = recruiterYearDropdown.querySelector('option[value="4+"]');

                if (year2) year2.style.display = 'none';
                if (year3) year3.style.display = 'none';
                if (year4plus) year4plus.style.display = 'none';

                // Auto-select 1st Year
                recruiterYearDropdown.value = '1';
            }
        }

        // Logout function
        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                localStorage.removeItem('gritSession');
                window.location.href = 'login.html';
            }
        }

        // ============================================
        // CALCULATOR CODE (UNCHANGED)
        // ============================================

        // Commission structure data
        const rookieCommission = [
            { min: 0, max: 74999, rate: 0.20 },
            { min: 75000, max: 99999, rate: 0.25 },
            { min: 100000, max: 124999, rate: 0.28 },
            { min: 125000, max: 149999, rate: 0.31 },
            { min: 150000, max: 174999, rate: 0.34 },
            { min: 175000, max: 199999, rate: 0.37 },
            { min: 200000, max: 249999, rate: 0.42 },
            { min: 250000, max: 299999, rate: 0.45 },
            { min: 300000, max: 349999, rate: 0.50 },
            { min: 350000, max: 399999, rate: 0.52 },
            { min: 400000, max: 499999, rate: 0.53 },
            { min: 500000, max: Infinity, rate: 0.55 }
        ];

        const veteranCommission = [
            { min: 0, max: 74999, rate: 0.20 },
            { min: 75000, max: 99999, rate: 0.25 },
            { min: 100000, max: 124999, rate: 0.30 },
            { min: 125000, max: 149999, rate: 0.32 },
            { min: 150000, max: 199999, rate: 0.37 },
            { min: 200000, max: 249999, rate: 0.45 },
            { min: 250000, max: 299999, rate: 0.50 },
            { min: 300000, max: 349999, rate: 0.52 },
            { min: 350000, max: 399999, rate: 0.54 },
            { min: 400000, max: 499999, rate: 0.56 },
            { min: 500000, max: 599999, rate: 0.60 },
            { min: 600000, max: 749999, rate: 0.62 },
            { min: 750000, max: 999999, rate: 0.65 },
            { min: 1000000, max: 1249999, rate: 0.70 },
            { min: 1250000, max: 1499999, rate: 0.75 },
            { min: 1500000, max: Infinity, rate: 0.80 }
        ];

        // Profit share positions
        const profitSharePositions = {
            'partner': { requirement: '$100K + 3 Recruiting Lines', revenue: 100000, share: 0 },
            'divisional': { requirement: '$225K + 3 Partners', revenue: 225000, share: 0 },
            'regional': { requirement: '$150K + Divisional & 3 Partners', revenue: 150000, share: 0 },
            'senior-regional': { requirement: '$300K + Regional & 3 Partners', revenue: 300000, share: 0 },
            'director': { requirement: '$750K + Director & 4 Partners', revenue: 750000, share: 0 },
            'vice-president': { requirement: '$1.5M + Director & 4 Partners', revenue: 1500000, share: 0 },
            'senior-vice-president': { requirement: '$2M + VP & 3 Directors', revenue: 2000000, share: 0 }
        };

        // Step bonus tier structure - based only on service revenue and personal revenue
        const stepBonusTiers = [
            {
                name: 'Partner',
                serviceRevenue: 1500000,
                personalRevenue: 100000,
                bonus: 50000
            },
            {
                name: 'Divisional',
                serviceRevenue: 3000000,
                personalRevenue: 100000,
                bonus: 100000
            },
            {
                name: 'Senior Divisional',
                serviceRevenue: 6000000,
                personalRevenue: 0,
                bonus: 250000
            },
            {
                name: 'Regional',
                serviceRevenue: 10000000,
                personalRevenue: 0,
                bonus: 350000
            },
            {
                name: 'Senior Regional',
                serviceRevenue: 15000000,
                personalRevenue: 0,
                bonus: 500000
            },
            {
                name: 'Director',
                serviceRevenue: 25000000,
                personalRevenue: 0,
                bonus: 750000
            },
            {
                name: 'Vice President',
                serviceRevenue: 50000000,
                personalRevenue: 0,
                bonus: 1000000
            },
            {
                name: 'Senior Vice President',
                serviceRevenue: 75000000,
                personalRevenue: 0,
                bonus: 1500000
            },
            {
                name: 'GM',
                serviceRevenue: 100000000,
                personalRevenue: 0,
                bonus: 2000000
            }
        ];

        // Personal revenue step bonuses
        const personalRevenueBonuses = [
            {
                name: 'Personal $500K',
                personalRevenue: 500000,
                bonus: 25000
            },
            {
                name: 'Personal $750K',
                personalRevenue: 750000,
                bonus: 50000
            },
            {
                name: 'Personal $1M',
                personalRevenue: 1000000,
                bonus: 100000
            },
            {
                name: 'Personal $1.5M',
                personalRevenue: 1500000,
                bonus: 200000
            }
        ];

        // Toggle Sidebar
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.querySelector('.sidebar-overlay');
            const mobileHamburger = document.getElementById('mobile-hamburger-icon');
            const hamburgerButton = document.querySelector('.mobile-hamburger');

            sidebar.classList.toggle('expanded');
            
            // Toggle mobile hamburger animation
            if (mobileHamburger) {
                if (sidebar.classList.contains('expanded')) {
                    mobileHamburger.style.transform = 'rotate(90deg)';
                } else {
                    mobileHamburger.style.transform = 'rotate(0deg)';
                }
            }

            // Hamburger stays in top-left corner at all times

            // Toggle overlay for mobile
            if (window.innerWidth <= 768) {
                overlay.classList.toggle('active');
            }
        }

        function openTab(tabName) {
            // Hide all tab contents
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(content => content.classList.remove('active'));

            // Remove active class from all sidebar nav items
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => item.classList.remove('active'));

            // Show selected tab content
            document.getElementById(tabName).classList.add('active');

            // Add active class to clicked nav item
            const activeNavItem = document.getElementById('nav-' + tabName);
            if (activeNavItem) {
                activeNavItem.classList.add('active');
            }

            // Close sidebar on mobile after selection
            if (window.innerWidth <= 768) {
                const sidebar = document.getElementById('sidebar');
                const overlay = document.querySelector('.sidebar-overlay');
                sidebar.classList.remove('expanded');
                overlay.classList.remove('active');
            }
        }

        function toggleHousingOptions() {
            const payscale = document.getElementById('payscale').value;
            const rookieHousing = document.getElementById('rookie-housing');
            const veteranHousing = document.getElementById('veteran-housing');
            const rookieAccounts = document.getElementById('rookie-accounts');
            const startingCommissionGroup = document.getElementById('starting-commission-group');

            if (payscale === 'rookie') {
                rookieHousing.style.display = 'block';
                veteranHousing.style.display = 'none';
                rookieAccounts.style.display = 'block';
                startingCommissionGroup.style.display = 'none';
            } else if (payscale === 'veteran') {
                rookieHousing.style.display = 'none';
                veteranHousing.style.display = 'block';
                rookieAccounts.style.display = 'none';
                startingCommissionGroup.style.display = 'none';
            } else if (payscale === 'return-rep') {
                // Return reps use veteran housing options
                rookieHousing.style.display = 'none';
                veteranHousing.style.display = 'block';
                rookieAccounts.style.display = 'none';
                startingCommissionGroup.style.display = 'block';
            }
        }

        function calculateRevenue() {
            const accountsSold = parseFloat(document.getElementById('accounts-sold').value) || 0;
            const avgContract = parseFloat(document.getElementById('avg-contract').value) || 0;
            
            // Always calculate revenue, even if one field is 0
            const totalRevenue = accountsSold * avgContract;
            document.getElementById('revenue').value = totalRevenue.toFixed(2);
            
            // Auto-check rent credit if rookie and 150+ accounts
            const payscale = document.getElementById('payscale').value;
            if (payscale === 'rookie' && accountsSold >= 150) {
                document.getElementById('rent-credit').checked = true;
            } else if (payscale === 'rookie' && accountsSold < 150) {
                document.getElementById('rent-credit').checked = false;
            }
        }

        function calculateCommission() {
            const payscale = document.getElementById('payscale').value;
            const servicedRevenue = parseFloat(document.getElementById('revenue').value) || 0;
            const cancelationRate = parseFloat(document.getElementById('cancelation-rate').value) || 0;
            const monthsSelling = parseFloat(document.getElementById('months-selling').value) || 1;
            const accountsSold = parseFloat(document.getElementById('accounts-sold').value) || 0;
            const multiYearRate = parseFloat(document.getElementById('multi-year-rate').value) || 0;
            const welcomeCallRate = parseFloat(document.getElementById('welcome-call-rate').value) || 0;
            
            if (servicedRevenue === 0) {
                alert('Please enter a revenue amount');
                return;
            }

            // Calculate active revenue (after attrition)
            const activeRevenue = servicedRevenue * (1 - cancelationRate / 100);

            // Determine commission percentage based on SERVICED revenue tier
            let commissionStructure;
            let commissionRate = 0;

            if (payscale === 'return-rep') {
                // Return Rep: use veteran tiers but protect starting commission
                const startingCommission = parseFloat(document.getElementById('starting-commission').value) || 0;
                if (startingCommission === 0) {
                    alert('Please enter your starting commission percentage for Return Rep');
                    return;
                }

                const startingCommissionDecimal = startingCommission / 100;
                commissionStructure = veteranCommission;

                // Find the tier rate for this revenue level
                for (const tier of commissionStructure) {
                    if (servicedRevenue >= tier.min && servicedRevenue <= tier.max) {
                        // Use whichever is higher: starting commission or tier rate
                        commissionRate = Math.max(startingCommissionDecimal, tier.rate);
                        break;
                    }
                }
            } else {
                // Rookie or Veteran: standard logic
                commissionStructure = payscale === 'rookie' ? rookieCommission : veteranCommission;

                // Find commission rate based on serviced revenue tier
                for (const tier of commissionStructure) {
                    if (servicedRevenue >= tier.min && servicedRevenue <= tier.max) {
                        commissionRate = tier.rate;
                        break;
                    }
                }
            }

            // Calculate total commission owed based on active revenue but using serviced revenue's tier rate
            const totalCommissionOwed = activeRevenue * commissionRate;

            // Calculate upfront commission (based on serviced revenue)
            const upfrontRate = payscale === 'rookie' ? 0.10 : 0.15;
            const grossUpfrontCommission = servicedRevenue * upfrontRate;
            
            // Calculate housing costs
            let housingCosts = 0;
            if (payscale === 'rookie') {
                const housingType = document.getElementById('housing-type').value;
                const monthlyRate = housingType === 'shared' ? 950 : 1900;
                housingCosts = monthlyRate * monthsSelling;
            } else {
                // Veteran: $55/night * 29 nights * months
                housingCosts = 55 * 29 * monthsSelling;
            }

            // Calculate rent credit for rookies
            let rentCredit = 0;
            const isRentCreditEligible = payscale === 'rookie' && accountsSold >= 150;
            if (isRentCreditEligible && document.getElementById('rent-credit').checked) {
                rentCredit = 3000;
            }

            const netHousingDeduction = housingCosts - rentCredit;
            
            // Net upfront commission (gross upfront minus full housing costs - no rent credit applied here)
            const netUpfrontCommission = Math.max(0, grossUpfrontCommission - housingCosts);

            // Calculate backend commission (total commission - gross upfront)
            const backendCommission = totalCommissionOwed - grossUpfrontCommission;
            
            // Check requirements and calculate deductions
            let requirementDeductions = 0;
            
            // Multi-year deduction: $50 per account for accounts below 70% threshold
            if (multiYearRate < 70 && accountsSold > 0) {
                const multiYearDeficit = (70 - multiYearRate) / 100;
                const accountsNotMeetingMultiYear = Math.ceil(accountsSold * multiYearDeficit);
                requirementDeductions += accountsNotMeetingMultiYear * 50;
            }
            
            // Welcome call deduction: $50 per account for accounts below 90% threshold  
            if (welcomeCallRate < 90 && accountsSold > 0) {
                const welcomeCallDeficit = (90 - welcomeCallRate) / 100;
                const accountsNotMeetingWelcomeCall = Math.ceil(accountsSold * welcomeCallDeficit);
                requirementDeductions += accountsNotMeetingWelcomeCall * 50;
            }
            
            // Calculate net backend commission (backend + rent credit - requirement deductions)
            const netBackendCommission = backendCommission + rentCredit - requirementDeductions;
            
            // First 4 backend payments calculation: ((Serviced Revenue × 50%) × Commission Rate) - Gross Upfront ÷ 4
            const holdbackCommission = (servicedRevenue * 0.5) * commissionRate;
            const first4PaymentsBase = holdbackCommission - grossUpfrontCommission;
            const monthlyPaymentAmount = first4PaymentsBase / 4;
            
            // Final 2 payments calculation: (Active Revenue × Commission Rate) - Gross Upfront - First 4 Payments + Rent Credit - Requirement Deductions
            const activeCommissionTotal = activeRevenue * commissionRate;
            const totalFirst4Payments = first4PaymentsBase;
            const remainingForFinal2 = activeCommissionTotal - grossUpfrontCommission - totalFirst4Payments + rentCredit - requirementDeductions;
            const finalPaymentAmount = remainingForFinal2 / 2; // Allow negative values

            // Payment amounts (both monthly and final can be negative)
            const adjustedMonthlyPayment = monthlyPaymentAmount; // Can be negative
            const adjustedFinalPayment = finalPaymentAmount; // Can be negative
            
            // Total net commission includes negative final payments
            const totalNetCommission = netUpfrontCommission + (adjustedMonthlyPayment * 4) + (adjustedFinalPayment * 2);

            // Display results
            const servicedRevenueEl = document.getElementById('serviced-revenue');
            servicedRevenueEl.textContent = `$${servicedRevenue.toLocaleString('en-US', {minimumFractionDigits: 2})}`;
            servicedRevenueEl.style.color = '#28a745';

            const activeRevenueEl = document.getElementById('active-revenue');
            activeRevenueEl.textContent = `$${activeRevenue.toLocaleString('en-US', {minimumFractionDigits: 2})}`;
            activeRevenueEl.style.color = '#28a745';

            const totalCommissionEl = document.getElementById('total-commission-owed');
            totalCommissionEl.textContent = `$${totalCommissionOwed.toLocaleString('en-US', {minimumFractionDigits: 2})}`;
            totalCommissionEl.style.color = '#28a745';

            const grossUpfrontEl = document.getElementById('gross-upfront-commission');
            grossUpfrontEl.textContent = `$${grossUpfrontCommission.toLocaleString('en-US', {minimumFractionDigits: 2})}`;
            grossUpfrontEl.style.color = '#28a745';

            const netUpfrontEl = document.getElementById('net-upfront-commission');
            netUpfrontEl.textContent = `$${netUpfrontCommission.toLocaleString('en-US', {minimumFractionDigits: 2})}`;
            netUpfrontEl.style.color = '#28a745';

            const backendCommissionEl = document.getElementById('backend-commission');
            backendCommissionEl.textContent = `$${backendCommission.toLocaleString('en-US', {minimumFractionDigits: 2})}`;
            backendCommissionEl.style.color = '#28a745';

            const netBackendEl = document.getElementById('net-backend-commission');
            netBackendEl.textContent = `$${netBackendCommission.toLocaleString('en-US', {minimumFractionDigits: 2})}`;
            netBackendEl.style.color = '#28a745';
            
            // Show requirement deductions if any
            if (requirementDeductions > 0) {
                document.getElementById('requirement-deductions-row').style.display = 'flex';
                const requirementDeductionsEl = document.getElementById('requirement-deductions');
                requirementDeductionsEl.textContent = `-$${requirementDeductions.toLocaleString('en-US', {minimumFractionDigits: 2})}`;
                requirementDeductionsEl.style.color = '#dc3545';
            } else {
                document.getElementById('requirement-deductions-row').style.display = 'none';
            }
            const housingElement = document.getElementById('housing-costs');
            housingElement.textContent = `-$${housingCosts.toLocaleString('en-US', {minimumFractionDigits: 2})}`;
            housingElement.style.color = '#dc3545';
            
            if (isRentCreditEligible) {
                document.getElementById('rent-credit-row').style.display = 'flex';
                const rentCreditEl = document.getElementById('rent-credit-amount');
                rentCreditEl.textContent = `+$${rentCredit.toLocaleString('en-US', {minimumFractionDigits: 2})}`;
                rentCreditEl.style.color = '#28a745';
            } else {
                document.getElementById('rent-credit-row').style.display = 'none';
            }

            const monthlyPaymentEl = document.getElementById('monthly-payment');
            monthlyPaymentEl.textContent = `$${adjustedMonthlyPayment.toLocaleString('en-US', {minimumFractionDigits: 2})}`;
            monthlyPaymentEl.style.color = adjustedMonthlyPayment >= 0 ? '#28a745' : '#dc3545';

            const finalPaymentEl = document.getElementById('final-payment');
            finalPaymentEl.textContent = `$${adjustedFinalPayment.toLocaleString('en-US', {minimumFractionDigits: 2})}`;
            finalPaymentEl.style.color = adjustedFinalPayment >= 0 ? '#28a745' : '#dc3545';

            const netCommissionEl = document.getElementById('net-commission');
            netCommissionEl.textContent = `$${totalNetCommission.toLocaleString('en-US', {minimumFractionDigits: 2})}`;
            netCommissionEl.style.color = totalNetCommission >= 0 ? '#28a745' : '#dc3545';
            document.getElementById('commission-result').classList.add('show');
            
            // Sync active revenue to Step Bonus tab
            syncCommissionToStepBonus();
        }

        function calculateRecruiter() {
            // Get single recruiter data (check if elements exist first since Individual Calculator is commented out)
            const recruiterYearEl = document.getElementById('recruiter-year');
            const repRevenueEl = document.getElementById('recruiter-rep-revenue');
            const monthsWorkedEl = document.getElementById('recruiter-months-worked');

            const recruiterYear = recruiterYearEl ? recruiterYearEl.value : '1';
            const repRevenue = repRevenueEl ? (parseFloat(repRevenueEl.value) || 0) : 0;
            const monthsWorked = monthsWorkedEl ? (parseFloat(monthsWorkedEl.value) || 1) : 1;
            
            // Get multiple recruits data
            const multiRecruiterYear = document.getElementById('multi-recruiter-year').value;
            const rookieCount = parseFloat(document.getElementById('rookie-count').value) || 0;
            const vetCount = parseFloat(document.getElementById('vet-count').value) || 0;
            const rookieAvgRevenue = parseFloat(document.getElementById('rookie-avg-revenue').value) || 0;
            const vetAvgRevenue = parseFloat(document.getElementById('vet-avg-revenue').value) || 0;
            const rookieAvgMonths = parseFloat(document.getElementById('rookie-avg-months').value) || 1;
            const vetAvgMonths = parseFloat(document.getElementById('vet-avg-months').value) || 1;
            
            // Check what data is provided
            const hasSingleRecruiterData = repRevenue > 0;
            const hasMultipleRecruitsData = (rookieCount > 0 && rookieAvgRevenue > 0) || (vetCount > 0 && vetAvgRevenue > 0);
            
            if (!hasSingleRecruiterData && !hasMultipleRecruitsData) {
                alert('Please enter data for either single recruiter override or total recruiting override calculation');
                return;
            }
            
            // Year-based override percentages
            const yearOverrides = {
                '1': 0.04,       // 4% for 1st year
                '2': 0.04,       // 4% for 2nd year
                '3': 0.03,       // 3% for 3rd year
                '4+': 0.02       // 2% for 4th+ year
            };
            
            const performanceThreshold = 18750; // $18,750 per month
            
            // Initialize results
            let singleRepOverride = 0;
            let finalOverrideRate = 0;
            let rookiesOverride = 0;
            let vetsOverride = 0;
            
            // Calculate single recruiter override if data is provided
            if (hasSingleRecruiterData) {
                const baseOverrideRate = yearOverrides[recruiterYear] || 0;
                const monthlyRevenue = repRevenue / monthsWorked;
                const isBelowThreshold = monthlyRevenue < performanceThreshold;
                finalOverrideRate = isBelowThreshold ? baseOverrideRate * 0.5 : baseOverrideRate;
                singleRepOverride = repRevenue * finalOverrideRate;
            }
            
            // Calculate multiple recruits override if data is provided
            if (hasMultipleRecruitsData) {
                const baseOverrideRate = yearOverrides[multiRecruiterYear] || 0;
                
                // Helper function to calculate override with performance adjustment
                function calculateOverride(revenue, months) {
                    if (revenue === 0) return 0;
                    const monthlyRevenue = revenue / months;
                    const isBelowThreshold = monthlyRevenue < performanceThreshold;
                    const finalOverrideRate = isBelowThreshold ? baseOverrideRate * 0.5 : baseOverrideRate;
                    return revenue * finalOverrideRate;
                }
                
                rookiesOverride = rookieCount * calculateOverride(rookieAvgRevenue, rookieAvgMonths);
                vetsOverride = vetCount * calculateOverride(vetAvgRevenue, vetAvgMonths);
            }
            
            const multipleRecruitsTotal = rookiesOverride + vetsOverride;
            const grandTotal = singleRepOverride + multipleRecruitsTotal;
            
            // Show/hide sections based on whether they have results
            if (hasSingleRecruiterData && singleRepOverride > 0) {
                document.getElementById('single-rep-section').style.display = 'block';
                document.getElementById('rec-year').textContent = `${recruiterYear}${recruiterYear === '1' ? 'st' : recruiterYear === '2' ? 'nd' : recruiterYear === '3' ? 'rd' : 'th'} Year`;
                document.getElementById('rec-rep-revenue').textContent = `$${repRevenue.toLocaleString('en-US', {minimumFractionDigits: 2})}`;
                document.getElementById('rec-final-rate').textContent = `${(finalOverrideRate * 100).toFixed(0)}%`;
                document.getElementById('rec-single-total').textContent = `$${singleRepOverride.toLocaleString('en-US', {minimumFractionDigits: 2})}`;
            } else {
                document.getElementById('single-rep-section').style.display = 'none';
            }
            
            if (hasMultipleRecruitsData && multipleRecruitsTotal > 0) {
                document.getElementById('multiple-recruits-section').style.display = 'block';
                document.getElementById('rec-rookies-total').textContent = `$${rookiesOverride.toLocaleString('en-US', {minimumFractionDigits: 2})}`;
                document.getElementById('rec-vets-total').textContent = `$${vetsOverride.toLocaleString('en-US', {minimumFractionDigits: 2})}`;
                document.getElementById('rec-multiple-total').textContent = `$${multipleRecruitsTotal.toLocaleString('en-US', {minimumFractionDigits: 2})}`;
            } else {
                document.getElementById('multiple-recruits-section').style.display = 'none';
            }
            
            document.getElementById('rec-grand-total').textContent = `$${grandTotal.toLocaleString('en-US', {minimumFractionDigits: 2})}`;
            document.getElementById('recruiter-result').classList.add('show');
        }

        function calculateManagement() {
            // Get single rep data (check if elements exist first since Individual Calculator is commented out)
            const payscaleEl = document.getElementById('mgmt-payscale');
            const repRevenueEl = document.getElementById('mgmt-rep-revenue');
            const monthsWorkedEl = document.getElementById('mgmt-months-worked');

            const payscale = payscaleEl ? payscaleEl.value : 'veteran';
            const repRevenue = repRevenueEl ? (parseFloat(repRevenueEl.value) || 0) : 0;
            const monthsWorked = monthsWorkedEl ? (parseFloat(monthsWorkedEl.value) || 1) : 1;
            
            // Get team data
            const rookieCount = parseFloat(document.getElementById('mgmt-rookie-count').value) || 0;
            const vetCount = parseFloat(document.getElementById('mgmt-vet-count').value) || 0;
            const rookieAvgRevenue = parseFloat(document.getElementById('mgmt-rookie-avg-revenue').value) || 0;
            const vetAvgRevenue = parseFloat(document.getElementById('mgmt-vet-avg-revenue').value) || 0;
            const rookieAvgMonths = parseFloat(document.getElementById('mgmt-rookie-avg-months').value) || 1;
            const vetAvgMonths = parseFloat(document.getElementById('mgmt-vet-avg-months').value) || 1;
            
            // Check what data is provided
            const hasSingleRepData = repRevenue > 0;
            const hasTeamData = (rookieCount > 0 && rookieAvgRevenue > 0) || (vetCount > 0 && vetAvgRevenue > 0);
            
            if (!hasSingleRepData && !hasTeamData) {
                alert('Please enter data for either single rep or team management override calculation');
                return;
            }
            
            // Management override rates
            const rookieOverrideRate = 0.05; // 5%
            const veteranOverrideRate = 0.03; // 3%
            const performanceThreshold = 18750; // $18,750 per month
            
            // Initialize results
            let singleRepOverride = 0;
            let finalOverrideRate = 0;
            let rookiesOverride = 0;
            let vetsOverride = 0;
            
            // Helper function to calculate override with performance adjustment
            function calculateOverride(revenue, months, baseRate) {
                if (revenue === 0) return 0;
                const monthlyRevenue = revenue / months;
                const isBelowThreshold = monthlyRevenue < performanceThreshold;
                const adjustedRate = isBelowThreshold ? baseRate * 0.5 : baseRate;
                return revenue * adjustedRate;
            }
            
            // Calculate single rep override if data is provided
            if (hasSingleRepData) {
                const baseRate = payscale === 'rookie' ? rookieOverrideRate : veteranOverrideRate;
                const monthlyRevenue = repRevenue / monthsWorked;
                const isBelowThreshold = monthlyRevenue < performanceThreshold;
                finalOverrideRate = isBelowThreshold ? baseRate * 0.5 : baseRate;
                singleRepOverride = repRevenue * finalOverrideRate;
            }
            
            // Calculate team overrides if data is provided
            if (hasTeamData) {
                rookiesOverride = rookieCount * calculateOverride(rookieAvgRevenue, rookieAvgMonths, rookieOverrideRate);
                vetsOverride = vetCount * calculateOverride(vetAvgRevenue, vetAvgMonths, veteranOverrideRate);
            }
            
            const teamTotal = rookiesOverride + vetsOverride;
            const grandTotal = singleRepOverride + teamTotal;
            
            // Show/hide sections based on whether they have results
            if (hasSingleRepData && singleRepOverride > 0) {
                document.getElementById('single-mgmt-section').style.display = 'block';
                document.getElementById('mgmt-payscale-result').textContent = payscale === 'rookie' ? 'Rookie' : 'Veteran/Experienced';
                document.getElementById('mgmt-rep-revenue-result').textContent = `$${repRevenue.toLocaleString('en-US', {minimumFractionDigits: 2})}`;
                document.getElementById('mgmt-override-rate').textContent = `${(finalOverrideRate * 100).toFixed(1)}%`;
                document.getElementById('mgmt-single-total').textContent = `$${singleRepOverride.toLocaleString('en-US', {minimumFractionDigits: 2})}`;
            } else {
                document.getElementById('single-mgmt-section').style.display = 'none';
            }
            
            if (hasTeamData && teamTotal > 0) {
                document.getElementById('team-mgmt-section').style.display = 'block';
                document.getElementById('mgmt-rookies-total').textContent = `$${rookiesOverride.toLocaleString('en-US', {minimumFractionDigits: 2})}`;
                document.getElementById('mgmt-vets-total').textContent = `$${vetsOverride.toLocaleString('en-US', {minimumFractionDigits: 2})}`;
                document.getElementById('mgmt-team-total').textContent = `$${teamTotal.toLocaleString('en-US', {minimumFractionDigits: 2})}`;
            } else {
                document.getElementById('team-mgmt-section').style.display = 'none';
            }
            
            document.getElementById('mgmt-grand-total').textContent = `$${grandTotal.toLocaleString('en-US', {minimumFractionDigits: 2})}`;
            document.getElementById('management-result').classList.add('show');
        }

        function calculateProfitShare() {
            // Get rep information (check if elements exist first since Individual Calculator is commented out)
            const payscaleEl = document.getElementById('ps-payscale');
            const activeRevenueEl = document.getElementById('ps-active-revenue');
            const monthsWorkedEl = document.getElementById('ps-months-worked');

            const payscale = payscaleEl ? payscaleEl.value : 'veteran';
            const activeRevenue = activeRevenueEl ? (parseFloat(activeRevenueEl.value) || 0) : 0;
            const monthsWorked = monthsWorkedEl ? (parseFloat(monthsWorkedEl.value) || 1) : 1;
            const yourPercentage = parseFloat(document.getElementById('your-ps-percentage').value) || 0;
            
            // Get team data
            const rookieCount = parseFloat(document.getElementById('ps-rookie-count').value) || 0;
            const vetCount = parseFloat(document.getElementById('ps-vet-count').value) || 0;
            const rookieAvgRevenue = parseFloat(document.getElementById('ps-rookie-avg-revenue').value) || 0;
            const vetAvgRevenue = parseFloat(document.getElementById('ps-vet-avg-revenue').value) || 0;
            const rookieAvgMonths = parseFloat(document.getElementById('ps-rookie-avg-months').value) || 1;
            const vetAvgMonths = parseFloat(document.getElementById('ps-vet-avg-months').value) || 1;
            
            // Check what data is provided
            const hasSingleRepData = activeRevenue > 0 && yourPercentage > 0;
            const hasTeamData = (rookieCount > 0 && rookieAvgRevenue > 0) || (vetCount > 0 && vetAvgRevenue > 0);
            
            if (!hasSingleRepData && !hasTeamData) {
                alert('Please enter data for either single rep or team profit share calculation');
                return;
            }
            
            // For team calculations, we need your profit share percentage
            if (hasTeamData && yourPercentage === 0) {
                alert('Please enter your profit share percentage for team calculations');
                return;
            }
            
            // Get downline percentage
            const downlinePercentage = parseFloat(document.getElementById('downline-percentage').value) || 0;
            
            // Base profit share rates
            const rookieBaseRate = 0.16; // 16%
            const veteranBaseRate = 0.14; // 14%
            const performanceThreshold = 18750; // $18,750 per month
            
            // Initialize results
            let singleRepProfitShare = 0;
            let baseRate = 0;
            let performanceAdjustment = 1.0;
            let adjustedBaseRate = 0;
            let effectiveRate = 0;
            let rookiesProfitShare = 0;
            let vetsProfitShare = 0;
            
            // Helper function to calculate profit share with performance adjustment
            function calculateProfitShare(revenue, months, baseRate, effectiveRateDecimal) {
                if (revenue === 0) return 0;
                const monthlyRevenue = revenue / months;
                const isBelowThreshold = monthlyRevenue < performanceThreshold;
                const adjustedRate = isBelowThreshold ? baseRate * 0.5 : baseRate;
                return revenue * adjustedRate * effectiveRateDecimal;
            }
            
            // Calculate single rep profit share if data is provided
            if (hasSingleRepData) {
                baseRate = payscale === 'rookie' ? rookieBaseRate : veteranBaseRate;
                const monthlyRevenue = activeRevenue / monthsWorked;
                const isBelowThreshold = monthlyRevenue < performanceThreshold;
                performanceAdjustment = isBelowThreshold ? 0.5 : 1.0;
                adjustedBaseRate = baseRate * performanceAdjustment;
                
                // Calculate effective rate based on downline
                effectiveRate = yourPercentage;
                if (downlinePercentage > 0) {
                    effectiveRate = Math.max(0, yourPercentage - downlinePercentage);
                }
                
                const effectiveRateDecimal = effectiveRate / 100;
                singleRepProfitShare = activeRevenue * adjustedBaseRate * effectiveRateDecimal;
            }
            
            // Calculate team profit share if data is provided
            if (hasTeamData) {
                // Calculate team effective rate
                let teamEffectiveRate;
                if (hasSingleRepData) {
                    // Use the effective rate from single rep calculation
                    teamEffectiveRate = effectiveRate;
                } else {
                    // Calculate effective rate for team only
                    teamEffectiveRate = yourPercentage;
                    if (downlinePercentage > 0) {
                        teamEffectiveRate = Math.max(0, yourPercentage - downlinePercentage);
                    }
                }
                
                const teamEffectiveRateDecimal = teamEffectiveRate / 100;
                
                rookiesProfitShare = rookieCount * calculateProfitShare(rookieAvgRevenue, rookieAvgMonths, rookieBaseRate, teamEffectiveRateDecimal);
                vetsProfitShare = vetCount * calculateProfitShare(vetAvgRevenue, vetAvgMonths, veteranBaseRate, teamEffectiveRateDecimal);
            }
            
            const teamTotal = rookiesProfitShare + vetsProfitShare;
            const totalProfitShare = singleRepProfitShare + teamTotal;
            
            // Show/hide sections based on whether they have results
            if (hasSingleRepData && singleRepProfitShare > 0) {
                document.getElementById('single-ps-section').style.display = 'block';
                document.getElementById('ps-payscale-result').textContent = payscale === 'rookie' ? 'Rookie' : 'Veteran';
                document.getElementById('ps-active-revenue-result').textContent = `$${activeRevenue.toLocaleString('en-US', {minimumFractionDigits: 2})}`;
                document.getElementById('ps-base-rate').textContent = `${(baseRate * 100).toFixed(1)}%`;
                document.getElementById('ps-performance-adjustment').textContent = `${(performanceAdjustment * 100).toFixed(0)}%`;
                document.getElementById('ps-adjusted-base-rate').textContent = `${(adjustedBaseRate * 100).toFixed(1)}%`;
                document.getElementById('ps-your-percentage').textContent = `${yourPercentage.toFixed(1)}%`;
                document.getElementById('ps-downline-percentage').textContent = `${downlinePercentage.toFixed(1)}%`;
                document.getElementById('ps-effective-rate').textContent = `${effectiveRate.toFixed(1)}%`;
                document.getElementById('ps-single-amount').textContent = `$${singleRepProfitShare.toLocaleString('en-US', {minimumFractionDigits: 2})}`;
            } else {
                document.getElementById('single-ps-section').style.display = 'none';
            }
            
            if (hasTeamData && teamTotal > 0) {
                document.getElementById('team-ps-section').style.display = 'block';
                document.getElementById('ps-rookies-total').textContent = `$${rookiesProfitShare.toLocaleString('en-US', {minimumFractionDigits: 2})}`;
                document.getElementById('ps-vets-total').textContent = `$${vetsProfitShare.toLocaleString('en-US', {minimumFractionDigits: 2})}`;
                document.getElementById('ps-team-total').textContent = `$${teamTotal.toLocaleString('en-US', {minimumFractionDigits: 2})}`;
            } else {
                document.getElementById('team-ps-section').style.display = 'none';
            }
            
            document.getElementById('ps-total-amount').textContent = `$${totalProfitShare.toLocaleString('en-US', {minimumFractionDigits: 2})}`;
            document.getElementById('profit-share-result').classList.add('show');
        }

        function calculateStepBonus() {
            // Get input values
            const serviceRevenue = parseFloat(document.getElementById('sb-service-revenue').value) || 0;
            const personalRevenue = parseFloat(document.getElementById('sb-personal-revenue').value) || 0;
            const isFirstYear = document.getElementById('first-year-qualifying').checked;
            
            if (serviceRevenue === 0) {
                alert('Please enter service revenue');
                return;
            }
            
            // Check qualification for each tier
            const qualifiedTiers = [];
            
            for (let i = 0; i < stepBonusTiers.length; i++) {
                const tier = stepBonusTiers[i];
                
                // Check if requirements are met (only service revenue and personal revenue)
                const meetsRequirements = 
                    serviceRevenue >= tier.serviceRevenue &&
                    personalRevenue >= tier.personalRevenue;
                
                if (meetsRequirements) {
                    qualifiedTiers.push(i);
                }
            }
            
            // Find highest qualified tier
            const highestTierIndex = qualifiedTiers.length > 0 ? Math.max(...qualifiedTiers) : -1;
            const highestTier = highestTierIndex >= 0 ? stepBonusTiers[highestTierIndex] : null;
            
            // Check personal revenue bonuses (tiered, not cumulative - only highest tier)
            let highestPersonalBonus = null;
            for (const personalBonus of personalRevenueBonuses) {
                if (personalRevenue >= personalBonus.personalRevenue) {
                    highestPersonalBonus = personalBonus;
                }
            }
            
            // Calculate bonuses
            let totalBonus = 0;
            const bonusBreakdown = [];
            
            // Add personal revenue bonus first (only the highest tier qualified)
            if (highestPersonalBonus) {
                totalBonus += highestPersonalBonus.bonus;
                bonusBreakdown.push({
                    name: highestPersonalBonus.name,
                    bonus: highestPersonalBonus.bonus,
                    isHighlighted: false
                });
            }
            
            if (highestTier) {
                if (isFirstYear) {
                    // First year: get the highest tier bonus PLUS the tier directly below it (if it exists)
                    totalBonus += highestTier.bonus;
                    
                    // Add the tier directly below FIRST (if there is one) - this will appear above
                    if (highestTierIndex > 0) {
                        const tierBelow = stepBonusTiers[highestTierIndex - 1];
                        totalBonus += tierBelow.bonus;
                        bonusBreakdown.push({
                            name: tierBelow.name,
                            bonus: tierBelow.bonus,
                            isHighlighted: false
                        });
                    }
                    
                    // Then add the qualified tier (highlighted)
                    bonusBreakdown.push({
                        name: highestTier.name,
                        bonus: highestTier.bonus,
                        isHighlighted: true
                    });
                } else {
                    // Not first year: only get the highest tier bonus (highlighted)
                    totalBonus += highestTier.bonus;
                    bonusBreakdown.push({
                        name: highestTier.name,
                        bonus: highestTier.bonus,
                        isHighlighted: true
                    });
                }
            }
            
            // Display results
            document.getElementById('sb-highest-tier').textContent = highestTier ? highestTier.name : 'None';
            document.getElementById('sb-first-year-status').textContent = isFirstYear ? 'Yes' : 'No';
            
            // Populate bonus breakdown
            const breakdownContainer = document.getElementById('sb-bonus-breakdown');
            breakdownContainer.innerHTML = '';
            
            if (bonusBreakdown.length > 0) {
                bonusBreakdown.forEach(item => {
                    const breakdownItem = document.createElement('div');
                    breakdownItem.className = 'result-item';
                    
                    breakdownItem.innerHTML = `
                        <span>${item.name} Bonus:</span>
                        <span>$${item.bonus.toLocaleString('en-US')}</span>
                    `;
                    breakdownContainer.appendChild(breakdownItem);
                });
            } else {
                const noBonus = document.createElement('div');
                noBonus.className = 'result-item';
                noBonus.innerHTML = `
                    <span>No Tier Qualified</span>
                    <span>$0</span>
                `;
                breakdownContainer.appendChild(noBonus);
            }
            
            document.getElementById('sb-total-bonus').textContent = `$${totalBonus.toLocaleString('en-US')}`;
            document.getElementById('step-bonus-result').classList.add('show');
        }

        function calculateSummary() {
            let grandTotal = 0;
            
            // Helper function to extract numeric value from formatted strings
            function extractValue(text) {
                if (!text || text === '$0.00' || text === 'Not Calculated' || text === '-') return 0;
                const cleaned = text.replace(/[$,]/g, '');
                return parseFloat(cleaned) || 0;
            }
            
            // Commission Calculator
            const commissionElement = document.getElementById('net-commission');
            const commissionValue = commissionElement ? extractValue(commissionElement.textContent) : 0;
            const commissionCalculated = document.getElementById('commission-result')?.classList.contains('show') || false;
            
            document.getElementById('commission-status').textContent = commissionCalculated ? 'Calculated' : 'Not Calculated';
            document.getElementById('commission-total').textContent = `$${commissionValue.toLocaleString('en-US', {minimumFractionDigits: 2})}`;
            grandTotal += commissionValue;
            
            // Recruiter Override
            const recruiterElement = document.getElementById('rec-grand-total');
            const recruiterValue = recruiterElement ? extractValue(recruiterElement.textContent) : 0;
            const recruiterCalculated = document.getElementById('recruiter-result')?.classList.contains('show') || false;
            
            document.getElementById('recruiter-status').textContent = recruiterCalculated ? 'Calculated' : 'Not Calculated';
            document.getElementById('recruiter-total').textContent = `$${recruiterValue.toLocaleString('en-US', {minimumFractionDigits: 2})}`;
            grandTotal += recruiterValue;
            
            // Management Override
            const managementElement = document.getElementById('mgmt-grand-total');
            const managementValue = managementElement ? extractValue(managementElement.textContent) : 0;
            const managementCalculated = document.getElementById('management-result')?.classList.contains('show') || false;
            
            document.getElementById('management-status').textContent = managementCalculated ? 'Calculated' : 'Not Calculated';
            document.getElementById('management-total').textContent = `$${managementValue.toLocaleString('en-US', {minimumFractionDigits: 2})}`;
            grandTotal += managementValue;
            
            // Profit Share
            const profitShareElement = document.getElementById('ps-total-amount');
            const profitShareValue = profitShareElement ? extractValue(profitShareElement.textContent) : 0;
            const profitShareCalculated = document.getElementById('profit-share-result')?.classList.contains('show') || false;
            
            document.getElementById('profit-share-status').textContent = profitShareCalculated ? 'Calculated' : 'Not Calculated';
            document.getElementById('profit-share-total').textContent = `$${profitShareValue.toLocaleString('en-US', {minimumFractionDigits: 2})}`;
            grandTotal += profitShareValue;
            
            // Step Bonus
            const stepBonusElement = document.getElementById('sb-total-bonus');
            const stepBonusValue = stepBonusElement ? extractValue(stepBonusElement.textContent) : 0;
            const stepBonusCalculated = document.getElementById('step-bonus-result')?.classList.contains('show') || false;
            
            document.getElementById('step-bonus-status').textContent = stepBonusCalculated ? 'Calculated' : 'Not Calculated';
            document.getElementById('step-bonus-total').textContent = `$${stepBonusValue.toLocaleString('en-US', {minimumFractionDigits: 2})}`;
            grandTotal += stepBonusValue;
            
            // Display Grand Total
            document.getElementById('grand-total').textContent = `$${Math.round(grandTotal).toLocaleString('en-US')}`;
            document.getElementById('summary-result').classList.add('show');
        }

        // Function to sync team data across Recruiter, Management, Profit Share, and Step Bonus tabs
        function syncTeamData() {
            // Get values from Recruiter tab (source)
            const rookieCount = parseFloat(document.getElementById('rookie-count').value) || 0;
            const vetCount = parseFloat(document.getElementById('vet-count').value) || 0;
            const rookieAvgRevenue = parseFloat(document.getElementById('rookie-avg-revenue').value) || 0;
            const vetAvgRevenue = parseFloat(document.getElementById('vet-avg-revenue').value) || 0;
            const rookieAvgMonths = document.getElementById('rookie-avg-months').value;
            const vetAvgMonths = document.getElementById('vet-avg-months').value;
            
            // Sync to Management tab
            document.getElementById('mgmt-rookie-count').value = rookieCount;
            document.getElementById('mgmt-vet-count').value = vetCount;
            document.getElementById('mgmt-rookie-avg-revenue').value = rookieAvgRevenue;
            document.getElementById('mgmt-vet-avg-revenue').value = vetAvgRevenue;
            document.getElementById('mgmt-rookie-avg-months').value = rookieAvgMonths;
            document.getElementById('mgmt-vet-avg-months').value = vetAvgMonths;
            
            // Sync to Profit Share tab
            document.getElementById('ps-rookie-count').value = rookieCount;
            document.getElementById('ps-vet-count').value = vetCount;
            document.getElementById('ps-rookie-avg-revenue').value = rookieAvgRevenue;
            document.getElementById('ps-vet-avg-revenue').value = vetAvgRevenue;
            document.getElementById('ps-rookie-avg-months').value = rookieAvgMonths;
            document.getElementById('ps-vet-avg-months').value = vetAvgMonths;
            
            // Calculate total team production for Step Bonus tab
            const totalRookieRevenue = rookieCount * rookieAvgRevenue;
            const totalVetRevenue = vetCount * vetAvgRevenue;
            const totalTeamProduction = totalRookieRevenue + totalVetRevenue;
            
            // Sync calculated team production to Step Bonus tab
            document.getElementById('sb-service-revenue').value = totalTeamProduction;
        }

        // Function to sync commission active revenue to step bonus personal revenue
        function syncCommissionToStepBonus() {
            // Get calculated active revenue from Commission Calculator results
            const activeRevenueElement = document.getElementById('active-revenue');
            if (activeRevenueElement && activeRevenueElement.textContent !== '$0.00') {
                // Extract numeric value from formatted text (e.g., "$25,000.00" -> 25000)
                const activeRevenueText = activeRevenueElement.textContent.replace(/[$,]/g, '');
                const activeRevenue = parseFloat(activeRevenueText) || 0;
                
                // Sync to Step Bonus tab personal revenue
                document.getElementById('sb-personal-revenue').value = activeRevenue;
            }
        }

        // Format number inputs
        document.addEventListener('DOMContentLoaded', function() {
            const numberInputs = document.querySelectorAll('input[type="number"]');
            numberInputs.forEach(input => {
                input.addEventListener('input', function(e) {
                    // Remove non-numeric characters except decimal point
                    let value = e.target.value.replace(/[^0-9.]/g, '');
                    
                    // Ensure only one decimal point
                    const parts = value.split('.');
                    if (parts.length > 2) {
                        value = parts[0] + '.' + parts.slice(1).join('');
                    }
                    
                    e.target.value = value;
                });
            });
            
            // Add event listeners to Recruiter tab team fields for syncing
            const recruiterTeamFields = [
                'rookie-count',
                'vet-count', 
                'rookie-avg-revenue',
                'vet-avg-revenue',
                'rookie-avg-months',
                'vet-avg-months'
            ];
            
            recruiterTeamFields.forEach(fieldId => {
                const field = document.getElementById(fieldId);
                if (field) {
                    field.addEventListener('input', syncTeamData);
                    field.addEventListener('change', syncTeamData);
                }
            });
            
            // Note: Commission to Step Bonus sync will be triggered when commission is calculated
            // The syncCommissionToStepBonus() function should be called from the calculateCommission() function
            
            // Initialize housing options
            toggleHousingOptions();
        });

        // PDF Export Functions
        function exportPersonalPDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();

            // Helper function to add GRIT header
            function addHeader(isFirstPage = true) {
                doc.setFillColor(161, 14, 2);
                doc.rect(0, 0, 210, 35, 'F');

                doc.setTextColor(255, 255, 255);
                doc.setFontSize(26);
                doc.setFont(undefined, 'bold');
                doc.text('GRIT x FORGE', 20, 18);

                doc.setFontSize(14);
                doc.setFont(undefined, 'normal');
                doc.text('PayPlan Calculator', 20, 27);

                doc.setFontSize(16);
                doc.setFont(undefined, 'bold');
                doc.text('Personal Commission', 190, 18, { align: 'right' });

                const session = JSON.parse(localStorage.getItem('gritSession') || '{}');
                const userName = session.email ? session.email.split('@')[0] : 'User';

                doc.setFontSize(9);
                doc.setFont(undefined, 'normal');
                doc.text(userName, 190, 25, { align: 'right' });
                doc.text(new Date().toLocaleDateString(), 190, 30, { align: 'right' });
            }

            // Helper function to check if we need a new page
            function checkPageBreak(currentY, spaceNeeded = 20) {
                if (currentY + spaceNeeded > 270) {
                    doc.addPage();
                    addHeader(false);
                    return 45;
                }
                return currentY;
            }

            // Add first page header
            addHeader(true);

            let yPos = 50;

            // Get input data
            const payscale = document.getElementById('payscale').value;
            const revenue = document.getElementById('revenue').value || '0';
            const accountsSold = document.getElementById('accounts-sold').value || '0';
            const avgContract = document.getElementById('avg-contract').value || '0';
            const cancelationRate = document.getElementById('cancelation-rate').value || '20';
            const monthsSelling = document.getElementById('months-selling').value || '1';
            const multiYearRate = document.getElementById('multi-year-rate').value || '0';
            const welcomeCallRate = document.getElementById('welcome-call-rate').value || '0';

            // INPUT DATA Section
            doc.setTextColor(161, 14, 2);
            doc.setFontSize(13);
            doc.setFont(undefined, 'bold');
            doc.text('INPUT DATA', 24, yPos);

            yPos += 10;

            // Light background box
            const inputBoxHeight = payscale === 'rookie' ? 80 : 64;
            doc.setFillColor(248, 249, 250);
            doc.rect(18, yPos, 177, inputBoxHeight, 'F');

            doc.setDrawColor(232, 236, 239);
            doc.setLineWidth(0.5);
            doc.rect(18, yPos, 177, inputBoxHeight);

            yPos += 8;

            doc.setTextColor(60, 60, 60);
            doc.setFontSize(10);
            doc.setFont(undefined, 'normal');

            // Two column layout
            doc.text('Payscale:', 24, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(payscale.charAt(0).toUpperCase() + payscale.slice(1), 60, yPos);

            doc.setFont(undefined, 'normal');
            doc.text('Months Selling:', 105, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(monthsSelling.toString(), 150, yPos);

            yPos += 8;

            doc.setFont(undefined, 'normal');
            doc.text('Accounts Sold:', 24, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(accountsSold.toString(), 60, yPos);

            doc.setFont(undefined, 'normal');
            doc.text('Cancelation Rate:', 105, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(`${cancelationRate}%`, 150, yPos);

            yPos += 8;

            doc.setFont(undefined, 'normal');
            doc.text('Avg Contract:', 24, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(`$${parseFloat(avgContract || 0).toLocaleString()}`, 60, yPos);

            doc.setFont(undefined, 'normal');
            doc.text('Multi-Year Rate:', 105, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(`${multiYearRate}%`, 150, yPos);

            yPos += 8;

            doc.setFont(undefined, 'normal');
            doc.text('Serviced Revenue:', 24, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(`$${parseFloat(revenue || 0).toLocaleString()}`, 60, yPos);

            doc.setFont(undefined, 'normal');
            doc.text('Welcome Call Rate:', 105, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(`${welcomeCallRate}%`, 150, yPos);

            yPos += 8;

            // Housing info for rookies
            if (payscale === 'rookie') {
                const housingType = document.getElementById('housing-type').value;
                const rentCredit = document.getElementById('rent-credit').checked;

                doc.setFont(undefined, 'normal');
                doc.text('Housing Type:', 24, yPos);
                doc.setFont(undefined, 'bold');
                doc.text(housingType === 'shared' ? 'Shared ($950/mo)' : 'Private ($1900/mo)', 60, yPos);

                doc.setFont(undefined, 'normal');
                doc.text('Rent Credit:', 105, yPos);
                doc.setFont(undefined, 'bold');
                doc.text(rentCredit ? 'Yes' : 'No', 150, yPos);

                yPos += 8;
            }

            yPos += 17;

            // Check if we need a new page before Commission Breakdown
            yPos = checkPageBreak(yPos, 100);

            // COMMISSION BREAKDOWN Section
            doc.setTextColor(161, 14, 2);
            doc.setFontSize(13);
            doc.setFont(undefined, 'bold');
            doc.text('COMMISSION BREAKDOWN', 24, yPos);

            yPos += 10;

            // Get calculated results
            const servicedRevenue = document.getElementById('serviced-revenue').textContent;
            const activeRevenue = document.getElementById('active-revenue').textContent;
            const totalCommissionOwed = document.getElementById('total-commission-owed').textContent;
            const grossUpfrontCommission = document.getElementById('gross-upfront-commission').textContent;
            const netUpfrontCommission = document.getElementById('net-upfront-commission').textContent;
            const backendCommission = document.getElementById('backend-commission').textContent;
            const netBackendCommission = document.getElementById('net-backend-commission').textContent;
            const housingCosts = document.getElementById('housing-costs').textContent;
            const monthlyPayment = document.getElementById('monthly-payment').textContent;
            const finalPayment = document.getElementById('final-payment').textContent;
            const netCommission = document.getElementById('net-commission').textContent;

            // Table with alternating rows
            const tableData = [
                { label: 'Serviced Revenue', value: servicedRevenue, color: 'normal' },
                { label: 'Active Revenue (after attrition)', value: activeRevenue, color: 'normal' },
                { label: 'Total Commission Owed', value: totalCommissionOwed, color: 'green' },
                { label: 'Gross Upfront Commission', value: grossUpfrontCommission, color: 'normal' },
                { label: 'Housing Costs', value: housingCosts, color: 'red' },
                { label: 'Net Upfront Commission', value: netUpfrontCommission, color: 'green' },
                { label: 'Backend Commission Due', value: backendCommission, color: 'normal' },
                { label: 'Net Backend Commission', value: netBackendCommission, color: 'green' },
                { label: 'Monthly Payments (4 months)', value: monthlyPayment, color: 'normal' },
                { label: 'Final Payments (2 payments)', value: finalPayment, color: 'normal' }
            ];

            tableData.forEach((row, index) => {
                // Check if we need a new page
                yPos = checkPageBreak(yPos, 10);

                // Alternating background
                if (index % 2 === 0) {
                    doc.setFillColor(248, 249, 250);
                    doc.rect(18, yPos, 177, 7, 'F');
                }

                doc.setTextColor(60, 60, 60);
                doc.setFontSize(9);
                doc.setFont(undefined, 'normal');
                doc.text(row.label, 24, yPos + 5);

                // Color code the values
                if (row.color === 'green') {
                    doc.setTextColor(161, 14, 2);
                } else if (row.color === 'red') {
                    doc.setTextColor(220, 53, 69);
                } else {
                    doc.setTextColor(60, 60, 60);
                }

                doc.setFont(undefined, 'bold');
                doc.text(row.value, 190, yPos + 5, { align: 'right' });

                yPos += 7;
            });

            yPos += 8;

            // Check if we need a new page before total
            yPos = checkPageBreak(yPos, 25);

            // Total in green highlighted box
            doc.setFillColor(161, 14, 2);
            doc.roundedRect(18, yPos, 177, 18, 2, 2, 'F');

            doc.setTextColor(255, 255, 255);
            doc.setFontSize(12);
            doc.setFont(undefined, 'bold');
            doc.text('NET COMMISSION TOTAL', 24, yPos + 8);

            doc.setFontSize(18);
            doc.text(netCommission, 190, yPos + 12, { align: 'right' });

            // Footer with quote and disclaimer
            const pageCount = doc.internal.getNumberOfPages();
            for (let i = 1; i <= pageCount; i++) {
                doc.setPage(i);

                doc.setTextColor(100, 100, 100);
                doc.setFontSize(8);
                doc.setFont(undefined, 'italic');
                doc.text('"He who is not courageous enough to take risks will accomplish nothing in life."', 105, 273, { align: 'center' });
                doc.text('- Muhammad Ali', 105, 279, { align: 'center' });

                doc.setFont(undefined, 'normal');
                doc.setFontSize(8);
                doc.setTextColor(133, 100, 4);
                doc.text('Note: This is an estimate based on the inputs provided. Actual compensation may vary', 105, 286, { align: 'center' });
                doc.text('based on company policies, performance requirements, and other factors.', 105, 291, { align: 'center' });

                doc.setFontSize(7);
                doc.setTextColor(161, 14, 2);
                doc.text('GRIT x FORGE PayPlan Calculator', 105, 296, { align: 'center' });
            }

            doc.save('Grit_x_Forge_Personal_Commission_Report.pdf');
        }

        function exportRecruiterPDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();

            // Helper function to add GRIT header
            function addHeader(isFirstPage = true) {
                doc.setFillColor(161, 14, 2);
                doc.rect(0, 0, 210, 35, 'F');

                doc.setTextColor(255, 255, 255);
                doc.setFontSize(26);
                doc.setFont(undefined, 'bold');
                doc.text('GRIT x FORGE', 20, 18);

                doc.setFontSize(14);
                doc.setFont(undefined, 'normal');
                doc.text('PayPlan Calculator', 20, 27);

                doc.setFontSize(16);
                doc.setFont(undefined, 'bold');
                doc.text('Recruiter Override', 190, 18, { align: 'right' });

                const session = JSON.parse(localStorage.getItem('gritSession') || '{}');
                const userName = session.email ? session.email.split('@')[0] : 'User';

                doc.setFontSize(9);
                doc.setFont(undefined, 'normal');
                doc.text(userName, 190, 25, { align: 'right' });
                doc.text(new Date().toLocaleDateString(), 190, 30, { align: 'right' });
            }

            // Helper function to check if we need a new page
            function checkPageBreak(currentY, spaceNeeded = 20) {
                if (currentY + spaceNeeded > 270) {
                    doc.addPage();
                    addHeader(false);
                    return 45;
                }
                return currentY;
            }

            // Add first page header
            addHeader(true);

            let yPos = 50;

            // Get input data
            const recruiterYear = document.getElementById('recruiter-year')?.value || '1';
            const repRevenue = document.getElementById('recruiter-rep-revenue')?.value || '0';
            const monthsWorked = document.getElementById('recruiter-months-worked')?.value || '1';
            const multiRecruiterYear = document.getElementById('multi-recruiter-year').value;
            const rookieCount = document.getElementById('rookie-count').value || '0';
            const vetCount = document.getElementById('vet-count').value || '0';
            const rookieAvgRevenue = document.getElementById('rookie-avg-revenue').value || '0';
            const vetAvgRevenue = document.getElementById('vet-avg-revenue').value || '0';

            // INPUT DATA Section
            doc.setTextColor(161, 14, 2);
            doc.setFontSize(13);
            doc.setFont(undefined, 'bold');
            doc.text('INPUT DATA', 24, yPos);

            yPos += 10;

            // Light background box
            doc.setFillColor(248, 249, 250);
            doc.rect(18, yPos, 177, 96, 'F');

            doc.setDrawColor(232, 236, 239);
            doc.setLineWidth(0.5);
            doc.rect(18, yPos, 177, 96);

            yPos += 8;

            doc.setTextColor(60, 60, 60);
            doc.setFontSize(10);
            doc.setFont(undefined, 'bold');
            doc.text('Multiple Recruits Override:', 24, yPos);

            yPos += 8;

            doc.setFont(undefined, 'normal');
            doc.text('Recruiter Year:', 24, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(multiRecruiterYear, 70, yPos);

            yPos += 8;

            doc.setFont(undefined, 'normal');
            doc.text('Rookie Count:', 24, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(rookieCount.toString(), 70, yPos);

            doc.setFont(undefined, 'normal');
            doc.text('Veteran Count:', 105, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(vetCount.toString(), 150, yPos);

            yPos += 8;

            doc.setFont(undefined, 'normal');
            doc.text('Avg Rookie Revenue:', 24, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(`$${parseFloat(rookieAvgRevenue).toLocaleString()}`, 70, yPos);

            doc.setFont(undefined, 'normal');
            doc.text('Avg Veteran Revenue:', 105, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(`$${parseFloat(vetAvgRevenue).toLocaleString()}`, 150, yPos);

            yPos += 25;

            // Check if we need a new page
            yPos = checkPageBreak(yPos, 50);

            // CALCULATION RESULTS Section
            doc.setTextColor(161, 14, 2);
            doc.setFontSize(13);
            doc.setFont(undefined, 'bold');
            doc.text('OVERRIDE PAYMENT', 24, yPos);

            yPos += 10;

            const grandTotal = document.getElementById('rec-grand-total').textContent;

            // Total in green highlighted box
            doc.setFillColor(161, 14, 2);
            doc.roundedRect(18, yPos, 177, 18, 2, 2, 'F');

            doc.setTextColor(255, 255, 255);
            doc.setFontSize(12);
            doc.setFont(undefined, 'bold');
            doc.text('TOTAL OVERRIDE PAYMENT', 24, yPos + 8);

            doc.setFontSize(18);
            doc.text(grandTotal, 190, yPos + 12, { align: 'right' });

            // Footer with quote and disclaimer
            const pageCount = doc.internal.getNumberOfPages();
            for (let i = 1; i <= pageCount; i++) {
                doc.setPage(i);

                doc.setTextColor(100, 100, 100);
                doc.setFontSize(8);
                doc.setFont(undefined, 'italic');
                doc.text('"He who is not courageous enough to take risks will accomplish nothing in life."', 105, 273, { align: 'center' });
                doc.text('- Muhammad Ali', 105, 279, { align: 'center' });

                doc.setFont(undefined, 'normal');
                doc.setFontSize(8);
                doc.setTextColor(133, 100, 4);
                doc.text('Note: This is an estimate based on the inputs provided. Actual compensation may vary', 105, 286, { align: 'center' });
                doc.text('based on company policies, performance requirements, and other factors.', 105, 291, { align: 'center' });

                doc.setFontSize(7);
                doc.setTextColor(161, 14, 2);
                doc.text('GRIT x FORGE PayPlan Calculator', 105, 296, { align: 'center' });
            }

            doc.save('Grit_x_Forge_Recruiter_Override_Report.pdf');
        }

        function exportManagementPDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();

            // Helper function to add GRIT header
            function addHeader(isFirstPage = true) {
                doc.setFillColor(161, 14, 2);
                doc.rect(0, 0, 210, 35, 'F');

                doc.setTextColor(255, 255, 255);
                doc.setFontSize(26);
                doc.setFont(undefined, 'bold');
                doc.text('GRIT x FORGE', 20, 18);

                doc.setFontSize(14);
                doc.setFont(undefined, 'normal');
                doc.text('PayPlan Calculator', 20, 27);

                doc.setFontSize(16);
                doc.setFont(undefined, 'bold');
                doc.text('Management Override', 190, 18, { align: 'right' });

                const session = JSON.parse(localStorage.getItem('gritSession') || '{}');
                const userName = session.email ? session.email.split('@')[0] : 'User';

                doc.setFontSize(9);
                doc.setFont(undefined, 'normal');
                doc.text(userName, 190, 25, { align: 'right' });
                doc.text(new Date().toLocaleDateString(), 190, 30, { align: 'right' });
            }

            // Helper function to check if we need a new page
            function checkPageBreak(currentY, spaceNeeded = 20) {
                if (currentY + spaceNeeded > 270) {
                    doc.addPage();
                    addHeader(false);
                    return 45;
                }
                return currentY;
            }

            // Add first page header
            addHeader(true);

            let yPos = 50;

            // Get input data
            const mgmtPayscale = document.getElementById('mgmt-payscale')?.value || 'veteran';
            const mgmtRepRevenue = document.getElementById('mgmt-rep-revenue')?.value || '0';
            const mgmtMonthsWorked = document.getElementById('mgmt-months-worked')?.value || '1';
            const mgmtRookieCount = document.getElementById('mgmt-rookie-count').value || '0';
            const mgmtVetCount = document.getElementById('mgmt-vet-count').value || '0';
            const mgmtRookieAvgRevenue = document.getElementById('mgmt-rookie-avg-revenue').value || '0';
            const mgmtVetAvgRevenue = document.getElementById('mgmt-vet-avg-revenue').value || '0';

            // INPUT DATA Section
            doc.setTextColor(161, 14, 2);
            doc.setFontSize(13);
            doc.setFont(undefined, 'bold');
            doc.text('INPUT DATA', 24, yPos);

            yPos += 10;

            // Light background box
            doc.setFillColor(248, 249, 250);
            doc.rect(18, yPos, 177, 64, 'F');

            doc.setDrawColor(232, 236, 239);
            doc.setLineWidth(0.5);
            doc.rect(18, yPos, 177, 64);

            yPos += 8;

            doc.setTextColor(60, 60, 60);
            doc.setFontSize(10);
            doc.setFont(undefined, 'normal');

            // Two column layout
            doc.text('Rep Payscale:', 24, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(mgmtPayscale.charAt(0).toUpperCase() + mgmtPayscale.slice(1), 70, yPos);

            doc.setFont(undefined, 'normal');
            doc.text('Months Worked:', 105, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(mgmtMonthsWorked.toString(), 150, yPos);

            yPos += 8;

            doc.setFont(undefined, 'normal');
            doc.text('Rookie Count:', 24, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(mgmtRookieCount.toString(), 70, yPos);

            doc.setFont(undefined, 'normal');
            doc.text('Veteran Count:', 105, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(mgmtVetCount.toString(), 150, yPos);

            yPos += 8;

            doc.setFont(undefined, 'normal');
            doc.text('Avg Rookie Revenue:', 24, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(`$${parseFloat(mgmtRookieAvgRevenue).toLocaleString()}`, 70, yPos);

            doc.setFont(undefined, 'normal');
            doc.text('Avg Veteran Revenue:', 105, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(`$${parseFloat(mgmtVetAvgRevenue).toLocaleString()}`, 150, yPos);

            yPos += 25;

            // Check if we need a new page
            yPos = checkPageBreak(yPos, 50);

            // OVERRIDE PAYMENT Section
            doc.setTextColor(161, 14, 2);
            doc.setFontSize(13);
            doc.setFont(undefined, 'bold');
            doc.text('OVERRIDE PAYMENT', 24, yPos);

            yPos += 10;

            const mgmtGrandTotal = document.getElementById('mgmt-grand-total').textContent;

            // Total in green highlighted box
            doc.setFillColor(161, 14, 2);
            doc.roundedRect(18, yPos, 177, 18, 2, 2, 'F');

            doc.setTextColor(255, 255, 255);
            doc.setFontSize(12);
            doc.setFont(undefined, 'bold');
            doc.text('TOTAL MANAGEMENT OVERRIDE', 24, yPos + 8);

            doc.setFontSize(18);
            doc.text(mgmtGrandTotal, 190, yPos + 12, { align: 'right' });

            // Footer with quote and disclaimer
            const pageCount = doc.internal.getNumberOfPages();
            for (let i = 1; i <= pageCount; i++) {
                doc.setPage(i);

                doc.setTextColor(100, 100, 100);
                doc.setFontSize(8);
                doc.setFont(undefined, 'italic');
                doc.text('"He who is not courageous enough to take risks will accomplish nothing in life."', 105, 273, { align: 'center' });
                doc.text('- Muhammad Ali', 105, 279, { align: 'center' });

                doc.setFont(undefined, 'normal');
                doc.setFontSize(8);
                doc.setTextColor(133, 100, 4);
                doc.text('Note: This is an estimate based on the inputs provided. Actual compensation may vary', 105, 286, { align: 'center' });
                doc.text('based on company policies, performance requirements, and other factors.', 105, 291, { align: 'center' });

                doc.setFontSize(7);
                doc.setTextColor(161, 14, 2);
                doc.text('GRIT x FORGE PayPlan Calculator', 105, 296, { align: 'center' });
            }

            doc.save('Grit_x_Forge_Management_Override_Report.pdf');
        }

        function exportProfitSharePDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();

            // Helper function to add GRIT header
            function addHeader(isFirstPage = true) {
                doc.setFillColor(161, 14, 2);
                doc.rect(0, 0, 210, 35, 'F');

                doc.setTextColor(255, 255, 255);
                doc.setFontSize(26);
                doc.setFont(undefined, 'bold');
                doc.text('GRIT x FORGE', 20, 18);

                doc.setFontSize(14);
                doc.setFont(undefined, 'normal');
                doc.text('PayPlan Calculator', 20, 27);

                doc.setFontSize(16);
                doc.setFont(undefined, 'bold');
                doc.text('Profit Share', 190, 18, { align: 'right' });

                const session = JSON.parse(localStorage.getItem('gritSession') || '{}');
                const userName = session.email ? session.email.split('@')[0] : 'User';

                doc.setFontSize(9);
                doc.setFont(undefined, 'normal');
                doc.text(userName, 190, 25, { align: 'right' });
                doc.text(new Date().toLocaleDateString(), 190, 30, { align: 'right' });
            }

            // Helper function to check if we need a new page
            function checkPageBreak(currentY, spaceNeeded = 20) {
                if (currentY + spaceNeeded > 270) {
                    doc.addPage();
                    addHeader(false);
                    return 45;
                }
                return currentY;
            }

            // Add first page header
            addHeader(true);

            let yPos = 50;

            // Get input data
            const psPayscale = document.getElementById('ps-payscale')?.value || 'veteran';
            const psActiveRevenue = document.getElementById('ps-active-revenue')?.value || '0';
            const psMonthsWorked = document.getElementById('ps-months-worked')?.value || '1';
            const yourPsPercentage = document.getElementById('your-ps-percentage').value || '0';
            const downlinePercentage = document.getElementById('downline-percentage').value || '0';

            // INPUT DATA Section
            doc.setTextColor(161, 14, 2);
            doc.setFontSize(13);
            doc.setFont(undefined, 'bold');
            doc.text('INPUT DATA', 24, yPos);

            yPos += 10;

            // Light background box
            doc.setFillColor(248, 249, 250);
            doc.rect(18, yPos, 177, 48, 'F');

            doc.setDrawColor(232, 236, 239);
            doc.setLineWidth(0.5);
            doc.rect(18, yPos, 177, 48);

            yPos += 8;

            doc.setTextColor(60, 60, 60);
            doc.setFontSize(10);
            doc.setFont(undefined, 'normal');

            // Two column layout
            doc.text('Rep Payscale:', 24, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(psPayscale.charAt(0).toUpperCase() + psPayscale.slice(1), 70, yPos);

            doc.setFont(undefined, 'normal');
            doc.text('Months Worked:', 105, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(psMonthsWorked.toString(), 150, yPos);

            yPos += 8;

            doc.setFont(undefined, 'normal');
            doc.text('Active Revenue:', 24, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(`$${parseFloat(psActiveRevenue).toLocaleString()}`, 70, yPos);

            yPos += 8;

            doc.setFont(undefined, 'normal');
            doc.text('Your PS Percentage:', 24, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(`${yourPsPercentage}%`, 70, yPos);

            doc.setFont(undefined, 'normal');
            doc.text('Downline Percentage:', 105, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(`${downlinePercentage}%`, 150, yPos);

            yPos += 25;

            // Check if we need a new page
            yPos = checkPageBreak(yPos, 50);

            // PROFIT SHARE PAYMENT Section
            doc.setTextColor(161, 14, 2);
            doc.setFontSize(13);
            doc.setFont(undefined, 'bold');
            doc.text('PROFIT SHARE PAYMENT', 24, yPos);

            yPos += 10;

            const psTotalAmount = document.getElementById('ps-total-amount').textContent;

            // Total in green highlighted box
            doc.setFillColor(161, 14, 2);
            doc.roundedRect(18, yPos, 177, 18, 2, 2, 'F');

            doc.setTextColor(255, 255, 255);
            doc.setFontSize(12);
            doc.setFont(undefined, 'bold');
            doc.text('TOTAL PROFIT SHARE', 24, yPos + 8);

            doc.setFontSize(18);
            doc.text(psTotalAmount, 190, yPos + 12, { align: 'right' });

            // Footer with quote and disclaimer
            const pageCount = doc.internal.getNumberOfPages();
            for (let i = 1; i <= pageCount; i++) {
                doc.setPage(i);

                doc.setTextColor(100, 100, 100);
                doc.setFontSize(8);
                doc.setFont(undefined, 'italic');
                doc.text('"He who is not courageous enough to take risks will accomplish nothing in life."', 105, 273, { align: 'center' });
                doc.text('- Muhammad Ali', 105, 279, { align: 'center' });

                doc.setFont(undefined, 'normal');
                doc.setFontSize(8);
                doc.setTextColor(133, 100, 4);
                doc.text('Note: This is an estimate based on the inputs provided. Actual compensation may vary', 105, 286, { align: 'center' });
                doc.text('based on company policies, performance requirements, and other factors.', 105, 291, { align: 'center' });

                doc.setFontSize(7);
                doc.setTextColor(161, 14, 2);
                doc.text('GRIT x FORGE PayPlan Calculator', 105, 296, { align: 'center' });
            }

            doc.save('Grit_x_Forge_Profit_Share_Report.pdf');
        }

        function exportStepBonusPDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();

            // Helper function to add GRIT header
            function addHeader(isFirstPage = true) {
                doc.setFillColor(161, 14, 2);
                doc.rect(0, 0, 210, 35, 'F');

                doc.setTextColor(255, 255, 255);
                doc.setFontSize(26);
                doc.setFont(undefined, 'bold');
                doc.text('GRIT x FORGE', 20, 18);

                doc.setFontSize(14);
                doc.setFont(undefined, 'normal');
                doc.text('PayPlan Calculator', 20, 27);

                doc.setFontSize(16);
                doc.setFont(undefined, 'bold');
                doc.text('Step Bonus', 190, 18, { align: 'right' });

                const session = JSON.parse(localStorage.getItem('gritSession') || '{}');
                const userName = session.email ? session.email.split('@')[0] : 'User';

                doc.setFontSize(9);
                doc.setFont(undefined, 'normal');
                doc.text(userName, 190, 25, { align: 'right' });
                doc.text(new Date().toLocaleDateString(), 190, 30, { align: 'right' });
            }

            // Helper function to check if we need a new page
            function checkPageBreak(currentY, spaceNeeded = 20) {
                if (currentY + spaceNeeded > 270) {
                    doc.addPage();
                    addHeader(false);
                    return 45;
                }
                return currentY;
            }

            // Add first page header
            addHeader(true);

            let yPos = 50;

            // Get input data
            const sbServiceRevenue = document.getElementById('sb-service-revenue').value || '0';
            const sbPersonalRevenue = document.getElementById('sb-personal-revenue').value || '0';
            const firstYearQualifying = document.getElementById('first-year-qualifying').checked;

            // INPUT DATA Section
            doc.setTextColor(161, 14, 2);
            doc.setFontSize(13);
            doc.setFont(undefined, 'bold');
            doc.text('INPUT DATA', 24, yPos);

            yPos += 10;

            // Light background box
            doc.setFillColor(248, 249, 250);
            doc.rect(18, yPos, 177, 32, 'F');

            doc.setDrawColor(232, 236, 239);
            doc.setLineWidth(0.5);
            doc.rect(18, yPos, 177, 32);

            yPos += 8;

            doc.setTextColor(60, 60, 60);
            doc.setFontSize(10);
            doc.setFont(undefined, 'normal');

            // Single column layout for this one
            doc.text('Team Serviced Revenue:', 24, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(`$${parseFloat(sbServiceRevenue).toLocaleString()}`, 90, yPos);

            yPos += 8;

            doc.setFont(undefined, 'normal');
            doc.text('Personal Revenue:', 24, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(`$${parseFloat(sbPersonalRevenue).toLocaleString()}`, 90, yPos);

            yPos += 8;

            doc.setFont(undefined, 'normal');
            doc.text('First Year Qualifying:', 24, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(firstYearQualifying ? 'Yes' : 'No', 90, yPos);

            yPos += 25;

            // Check if we need a new page
            yPos = checkPageBreak(yPos, 70);

            // STEP BONUS RESULTS Section
            doc.setTextColor(161, 14, 2);
            doc.setFontSize(13);
            doc.setFont(undefined, 'bold');
            doc.text('STEP BONUS RESULTS', 24, yPos);

            yPos += 10;

            const sbTotalBonus = document.getElementById('sb-total-bonus').textContent;
            const sbHighestTier = document.getElementById('sb-highest-tier').textContent;

            // Highest tier info box
            doc.setFillColor(248, 249, 250);
            doc.rect(18, yPos, 177, 12, 'F');

            doc.setDrawColor(232, 236, 239);
            doc.setLineWidth(0.5);
            doc.rect(18, yPos, 177, 12);

            doc.setTextColor(60, 60, 60);
            doc.setFontSize(10);
            doc.setFont(undefined, 'normal');
            doc.text('Highest Tier Achieved:', 24, yPos + 8);
            doc.setFont(undefined, 'bold');
            doc.text(sbHighestTier, 90, yPos + 8);

            yPos += 20;

            // Total in green highlighted box
            doc.setFillColor(161, 14, 2);
            doc.roundedRect(18, yPos, 177, 18, 2, 2, 'F');

            doc.setTextColor(255, 255, 255);
            doc.setFontSize(12);
            doc.setFont(undefined, 'bold');
            doc.text('TOTAL STEP BONUS', 24, yPos + 8);

            doc.setFontSize(18);
            doc.text(sbTotalBonus, 190, yPos + 12, { align: 'right' });

            // Footer with quote and disclaimer
            const pageCount = doc.internal.getNumberOfPages();
            for (let i = 1; i <= pageCount; i++) {
                doc.setPage(i);

                doc.setTextColor(100, 100, 100);
                doc.setFontSize(8);
                doc.setFont(undefined, 'italic');
                doc.text('"He who is not courageous enough to take risks will accomplish nothing in life."', 105, 273, { align: 'center' });
                doc.text('- Muhammad Ali', 105, 279, { align: 'center' });

                doc.setFont(undefined, 'normal');
                doc.setFontSize(8);
                doc.setTextColor(133, 100, 4);
                doc.text('Note: This is an estimate based on the inputs provided. Actual compensation may vary', 105, 286, { align: 'center' });
                doc.text('based on company policies, performance requirements, and other factors.', 105, 291, { align: 'center' });

                doc.setFontSize(7);
                doc.setTextColor(161, 14, 2);
                doc.text('GRIT x FORGE PayPlan Calculator', 105, 296, { align: 'center' });
            }

            doc.save('Grit_x_Forge_Step_Bonus_Report.pdf');
        }

        function exportSummaryPDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();

            // Helper function to add GRIT header
            function addHeader(isFirstPage = true) {
                doc.setFillColor(161, 14, 2);
                doc.rect(0, 0, 210, 35, 'F');

                doc.setTextColor(255, 255, 255);
                doc.setFontSize(26);
                doc.setFont(undefined, 'bold');
                doc.text('GRIT x FORGE', 20, 18);

                doc.setFontSize(14);
                doc.setFont(undefined, 'normal');
                doc.text('PayPlan Calculator', 20, 27);

                doc.setFontSize(16);
                doc.setFont(undefined, 'bold');
                doc.text('Summary Report', 190, 18, { align: 'right' });

                const session = JSON.parse(localStorage.getItem('gritSession') || '{}');
                const userName = session.email ? session.email.split('@')[0] : 'User';

                doc.setFontSize(9);
                doc.setFont(undefined, 'normal');
                doc.text(userName, 190, 25, { align: 'right' });
                doc.text(new Date().toLocaleDateString(), 190, 30, { align: 'right' });
            }

            // Helper function to check if we need a new page
            function checkPageBreak(currentY, spaceNeeded = 20) {
                if (currentY + spaceNeeded > 270) {
                    doc.addPage();
                    addHeader(false);
                    return 45;
                }
                return currentY;
            }

            // Add first page header
            addHeader(true);

            let yPos = 50;

            // Get summary totals
            const commissionTotal = document.getElementById('commission-total').textContent;
            const recruiterTotal = document.getElementById('recruiter-total').textContent;
            const managementTotal = document.getElementById('management-total').textContent;
            const profitShareTotal = document.getElementById('profit-share-total').textContent;
            const stepBonusTotal = document.getElementById('step-bonus-total').textContent;
            const grandTotal = document.getElementById('grand-total').textContent;

            // ==================== PERSONAL COMMISSION SECTION ====================
            doc.setTextColor(161, 14, 2);
            doc.setFontSize(13);
            doc.setFont(undefined, 'bold');
            doc.text('PERSONAL COMMISSION', 24, yPos);

            yPos += 5;

            // Subtotal
            doc.setFontSize(10);
            doc.setTextColor(161, 14, 2);
            doc.text(`Total: ${commissionTotal}`, 24, yPos);

            yPos += 8;

            // Personal Commission Input Data
            const payscale = document.getElementById('payscale').value;
            const revenue = document.getElementById('revenue').value || '0';
            const accountsSold = document.getElementById('accounts-sold').value || '0';
            const avgContract = document.getElementById('avg-contract').value || '0';
            const cancelationRate = document.getElementById('cancelation-rate').value || '20';
            const monthsSelling = document.getElementById('months-selling').value || '1';
            const multiYearRate = document.getElementById('multi-year-rate').value || '0';
            const welcomeCallRate = document.getElementById('welcome-call-rate').value || '0';

            doc.setFillColor(248, 249, 250);
            const personalBoxHeight = payscale === 'rookie' ? 64 : 48;
            doc.rect(18, yPos, 177, personalBoxHeight, 'F');
            doc.setDrawColor(232, 236, 239);
            doc.setLineWidth(0.5);
            doc.rect(18, yPos, 177, personalBoxHeight);

            yPos += 6;

            doc.setTextColor(60, 60, 60);
            doc.setFontSize(9);
            doc.setFont(undefined, 'normal');

            doc.text('Payscale:', 24, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(payscale.charAt(0).toUpperCase() + payscale.slice(1), 55, yPos);
            doc.setFont(undefined, 'normal');
            doc.text('Accounts Sold:', 95, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(accountsSold.toString(), 135, yPos);

            yPos += 7;

            doc.setFont(undefined, 'normal');
            doc.text('Revenue:', 24, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(`$${parseFloat(revenue).toLocaleString()}`, 55, yPos);
            doc.setFont(undefined, 'normal');
            doc.text('Months Selling:', 95, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(monthsSelling.toString(), 135, yPos);

            yPos += 7;

            doc.setFont(undefined, 'normal');
            doc.text('Avg Contract:', 24, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(`$${parseFloat(avgContract).toLocaleString()}`, 55, yPos);
            doc.setFont(undefined, 'normal');
            doc.text('Cancelation:', 95, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(`${cancelationRate}%`, 135, yPos);

            yPos += 7;

            doc.setFont(undefined, 'normal');
            doc.text('Multi-Year Rate:', 24, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(`${multiYearRate}%`, 55, yPos);
            doc.setFont(undefined, 'normal');
            doc.text('Welcome Call:', 95, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(`${welcomeCallRate}%`, 135, yPos);

            if (payscale === 'rookie') {
                const housingType = document.getElementById('housing-type').value;
                const rentCredit = document.getElementById('rent-credit').checked;

                yPos += 7;
                doc.setFont(undefined, 'normal');
                doc.text('Housing:', 24, yPos);
                doc.setFont(undefined, 'bold');
                doc.text(housingType === 'shared' ? 'Shared' : 'Private', 55, yPos);
                doc.setFont(undefined, 'normal');
                doc.text('Rent Credit:', 95, yPos);
                doc.setFont(undefined, 'bold');
                doc.text(rentCredit ? 'Yes' : 'No', 135, yPos);
            }

            yPos += 15;
            yPos = checkPageBreak(yPos, 50);

            // ==================== RECRUITER OVERRIDE SECTION ====================
            doc.setTextColor(161, 14, 2);
            doc.setFontSize(13);
            doc.setFont(undefined, 'bold');
            doc.text('RECRUITER OVERRIDE', 24, yPos);

            yPos += 5;

            doc.setFontSize(10);
            doc.setTextColor(161, 14, 2);
            doc.text(`Total: ${recruiterTotal}`, 24, yPos);

            yPos += 8;

            const multiRecruiterYear = document.getElementById('multi-recruiter-year').value;
            const rookieCount = document.getElementById('rookie-count').value || '0';
            const vetCount = document.getElementById('vet-count').value || '0';
            const rookieAvgRevenue = document.getElementById('rookie-avg-revenue').value || '0';
            const vetAvgRevenue = document.getElementById('vet-avg-revenue').value || '0';

            doc.setFillColor(248, 249, 250);
            doc.rect(18, yPos, 177, 34, 'F');
            doc.setDrawColor(232, 236, 239);
            doc.rect(18, yPos, 177, 34);

            yPos += 6;

            doc.setTextColor(60, 60, 60);
            doc.setFontSize(9);
            doc.setFont(undefined, 'normal');

            doc.text('Recruiter Year:', 24, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(multiRecruiterYear, 60, yPos);
            doc.setFont(undefined, 'normal');
            doc.text('Rookies:', 95, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(rookieCount.toString(), 120, yPos);
            doc.setFont(undefined, 'normal');
            doc.text('Veterans:', 145, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(vetCount.toString(), 170, yPos);

            yPos += 7;

            doc.setFont(undefined, 'normal');
            doc.text('Avg Rookie Revenue:', 24, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(`$${parseFloat(rookieAvgRevenue).toLocaleString()}`, 70, yPos);

            yPos += 7;

            doc.setFont(undefined, 'normal');
            doc.text('Avg Veteran Revenue:', 24, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(`$${parseFloat(vetAvgRevenue).toLocaleString()}`, 70, yPos);

            yPos += 15;
            yPos = checkPageBreak(yPos, 50);

            // ==================== MANAGEMENT OVERRIDE SECTION ====================
            doc.setTextColor(161, 14, 2);
            doc.setFontSize(13);
            doc.setFont(undefined, 'bold');
            doc.text('MANAGEMENT OVERRIDE', 24, yPos);

            yPos += 5;

            doc.setFontSize(10);
            doc.setTextColor(161, 14, 2);
            doc.text(`Total: ${managementTotal}`, 24, yPos);

            yPos += 8;

            const mgmtPayscale = document.getElementById('mgmt-payscale')?.value || 'veteran';
            const mgmtRookieCount = document.getElementById('mgmt-rookie-count').value || '0';
            const mgmtVetCount = document.getElementById('mgmt-vet-count').value || '0';
            const mgmtRookieAvgRevenue = document.getElementById('mgmt-rookie-avg-revenue').value || '0';
            const mgmtVetAvgRevenue = document.getElementById('mgmt-vet-avg-revenue').value || '0';

            doc.setFillColor(248, 249, 250);
            doc.rect(18, yPos, 177, 34, 'F');
            doc.setDrawColor(232, 236, 239);
            doc.rect(18, yPos, 177, 34);

            yPos += 6;

            doc.setTextColor(60, 60, 60);
            doc.setFontSize(9);
            doc.setFont(undefined, 'normal');

            doc.text('Payscale:', 24, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(mgmtPayscale.charAt(0).toUpperCase() + mgmtPayscale.slice(1), 60, yPos);
            doc.setFont(undefined, 'normal');
            doc.text('Rookies:', 95, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(mgmtRookieCount.toString(), 120, yPos);
            doc.setFont(undefined, 'normal');
            doc.text('Veterans:', 145, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(mgmtVetCount.toString(), 170, yPos);

            yPos += 7;

            doc.setFont(undefined, 'normal');
            doc.text('Avg Rookie Revenue:', 24, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(`$${parseFloat(mgmtRookieAvgRevenue).toLocaleString()}`, 70, yPos);

            yPos += 7;

            doc.setFont(undefined, 'normal');
            doc.text('Avg Veteran Revenue:', 24, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(`$${parseFloat(mgmtVetAvgRevenue).toLocaleString()}`, 70, yPos);

            yPos += 15;
            yPos = checkPageBreak(yPos, 50);

            // ==================== PROFIT SHARE SECTION ====================
            doc.setTextColor(161, 14, 2);
            doc.setFontSize(13);
            doc.setFont(undefined, 'bold');
            doc.text('PROFIT SHARE', 24, yPos);

            yPos += 5;

            doc.setFontSize(10);
            doc.setTextColor(161, 14, 2);
            doc.text(`Total: ${profitShareTotal}`, 24, yPos);

            yPos += 8;

            const psActiveRevenue = document.getElementById('ps-active-revenue')?.value || '0';
            const yourPsPercentage = document.getElementById('your-ps-percentage').value || '0';
            const downlinePercentage = document.getElementById('downline-percentage').value || '0';

            doc.setFillColor(248, 249, 250);
            doc.rect(18, yPos, 177, 27, 'F');
            doc.setDrawColor(232, 236, 239);
            doc.rect(18, yPos, 177, 27);

            yPos += 6;

            doc.setTextColor(60, 60, 60);
            doc.setFontSize(9);
            doc.setFont(undefined, 'normal');

            doc.text('Active Revenue:', 24, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(`$${parseFloat(psActiveRevenue).toLocaleString()}`, 65, yPos);

            yPos += 7;

            doc.setFont(undefined, 'normal');
            doc.text('Your PS Percentage:', 24, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(`${yourPsPercentage}%`, 65, yPos);
            doc.setFont(undefined, 'normal');
            doc.text('Downline:', 105, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(`${downlinePercentage}%`, 135, yPos);

            yPos += 15;
            yPos = checkPageBreak(yPos, 50);

            // ==================== STEP BONUS SECTION ====================
            doc.setTextColor(161, 14, 2);
            doc.setFontSize(13);
            doc.setFont(undefined, 'bold');
            doc.text('STEP BONUS', 24, yPos);

            yPos += 5;

            doc.setFontSize(10);
            doc.setTextColor(161, 14, 2);
            doc.text(`Total: ${stepBonusTotal}`, 24, yPos);

            yPos += 8;

            const sbServiceRevenue = document.getElementById('sb-service-revenue').value || '0';
            const sbPersonalRevenue = document.getElementById('sb-personal-revenue').value || '0';
            const firstYearQualifying = document.getElementById('first-year-qualifying').checked;
            const sbHighestTier = document.getElementById('sb-highest-tier').textContent;

            doc.setFillColor(248, 249, 250);
            doc.rect(18, yPos, 177, 27, 'F');
            doc.setDrawColor(232, 236, 239);
            doc.rect(18, yPos, 177, 27);

            yPos += 6;

            doc.setTextColor(60, 60, 60);
            doc.setFontSize(9);
            doc.setFont(undefined, 'normal');

            doc.text('Team Revenue:', 24, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(`$${parseFloat(sbServiceRevenue).toLocaleString()}`, 65, yPos);
            doc.setFont(undefined, 'normal');
            doc.text('Personal Revenue:', 105, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(`$${parseFloat(sbPersonalRevenue).toLocaleString()}`, 155, yPos);

            yPos += 7;

            doc.setFont(undefined, 'normal');
            doc.text('Highest Tier:', 24, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(sbHighestTier, 65, yPos);
            doc.setFont(undefined, 'normal');
            doc.text('1st Yr Qualifying:', 105, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(firstYearQualifying ? 'Yes' : 'No', 155, yPos);

            yPos += 20;
            yPos = checkPageBreak(yPos, 30);

            // ==================== GRAND TOTAL SECTION ====================
            doc.setTextColor(161, 14, 2);
            doc.setFontSize(13);
            doc.setFont(undefined, 'bold');
            doc.text('COMPENSATION SUMMARY', 24, yPos);

            yPos += 10;

            // Total in green highlighted box
            doc.setFillColor(161, 14, 2);
            doc.roundedRect(18, yPos, 177, 18, 2, 2, 'F');

            doc.setTextColor(255, 255, 255);
            doc.setFontSize(12);
            doc.setFont(undefined, 'bold');
            doc.text('TOTAL ESTIMATED COMPENSATION', 24, yPos + 8);

            doc.setFontSize(18);
            doc.text(grandTotal, 190, yPos + 12, { align: 'right' });

            // Footer with quote and disclaimer
            const pageCount = doc.internal.getNumberOfPages();
            for (let i = 1; i <= pageCount; i++) {
                doc.setPage(i);

                doc.setTextColor(100, 100, 100);
                doc.setFontSize(8);
                doc.setFont(undefined, 'italic');
                doc.text('"He who is not courageous enough to take risks will accomplish nothing in life."', 105, 273, { align: 'center' });
                doc.text('- Muhammad Ali', 105, 279, { align: 'center' });

                doc.setFont(undefined, 'normal');
                doc.setFontSize(8);
                doc.setTextColor(133, 100, 4);
                doc.text('Note: This is an estimate based on the inputs provided. Actual compensation may vary', 105, 286, { align: 'center' });
                doc.text('based on company policies, performance requirements, and other factors.', 105, 291, { align: 'center' });

                doc.setFontSize(7);
                doc.setTextColor(161, 14, 2);
                doc.text('GRIT x FORGE PayPlan Calculator', 105, 296, { align: 'center' });
            }

            doc.save('Grit_x_Forge_Compensation_Summary_Report.pdf');
        }
    </script>
</body>
</html>